import{g as w,e as v,f as E,h,i as y}from"./chunk-0f0e246a.js";import{g as f,e as u}from"./chunk-7a2a1854.js";import"./chunk-19c1a2bd.js";const g="/static/js/chunk-44873892.js",S=`#main{position:relative!important;height:calc(100% - 48px)}:not(.zvWithShortcuts)>#main{height:100%!important}
`;function I(e){const o=document.createElement("script");o.src=e,o.type="module",document.head.prepend(o)}const p={error(e){window.dispatchEvent(new CustomEvent("ZVEvent",{detail:{type:"toast",item:{type:"error",message:e}}}))},success(e){window.dispatchEvent(new CustomEvent("ZVEvent",{detail:{type:"toast",item:{type:"success",message:e}}}))}},V=async(e,o,s)=>{if(o.id!==u)return;if(e.item.type==="mensagens"){const t=e.item,n=await v(t),a=new CustomEvent("ZVEvent",{detail:{type:t.type,item:n,premium:e.premium}});window.dispatchEvent(a)}else if(e.item.type==="audios"){const t=e.item,n=await E(t),a=new CustomEvent("ZVEvent",{detail:{type:t.type,item:n,premium:e.premium}});window.dispatchEvent(a)}else if(e.item.type==="medias"){const t=e.item,n=await h(t),a=new CustomEvent("ZVEvent",{detail:{type:t.type,item:n,premium:e.premium}});window.dispatchEvent(a)}else if(e.item.type==="docs"){const t=e.item,n=await y(t),a=new CustomEvent("ZVEvent",{detail:{type:t.type,item:n,premium:e.premium}});window.dispatchEvent(a)}else if(e.item.type==="funis"){const t=e.item;if(!t.data||t.data.length===0)return;const n=new CustomEvent("ZVEvent",{detail:{type:t.type,item:t,premium:e.premium}});window.dispatchEvent(n)}s({ok:!0})};chrome.runtime.onMessage.addListener(V);window.addEventListener("ZVEventPTC",async e=>{const{detail:o}=e,{type:s,chatTargetId:r,promiseId:t,avoidToast:n,premium:a}=o;if(s==="sendItem"){const{itemId:c}=o,i=await f(c);if(!i){p.error("Item n\xE3o encontrado, recarregue a p\xE1gina");return}if(!i.data){p.error("Item vazio, envio cancelado");return}if(!r){p.error("Nenhum chat aberto");return}window.dispatchEvent(new CustomEvent("ZVEvent",{detail:{type:i.type,item:{...i,data:i.data},chatTargetId:r,promiseId:t,avoidToast:n,premium:a}}))}else if(s==="sendFunnel"){const{funnelId:c,secondsBeforeSend:i}=o,m=await w(c);m?window.dispatchEvent(new CustomEvent("ZVEvent",{detail:{type:"directFunnel",item:m,delayAtStart:i?i*1e3:void 0,chatTargetId:r,promiseId:t,avoidToast:n,premium:a}})):p.error("Funil n\xE3o encontrado, recarregue a p\xE1gina")}});const C=setInterval(async()=>{if(Boolean(document.querySelector("header"))&&Boolean(document.getElementById("pane-side"))){clearInterval(C),window.localStorage.setItem("ZVExtensionId",u),(async()=>{I(chrome.runtime.getURL(g));const a=document.createElement("style");a.innerHTML=S,document.head.prepend(a)})();async function e(){const c=await(await fetch("https://web.whatsapp.com/serviceworker.js")).text(),m=(c.match(/wa([\d.]+)\.canary/)||[])[1]||null,l=/(?:wa|version:")([\d.]+)"/g;let d=[];do if(d=l.exec(c),d!==null&&d[1]&&d[1]!==m)return d[1];while(d)}const o=await e(),s=window.localStorage.getItem("last-wid"),r=window.localStorage.getItem("last-wid-md"),[t]=(r==null?void 0:r.match(/\d+/))||(s==null?void 0:s.match(/\d+/))||[],n={type:"WPPLoaded",data:{wppVersion:o,nmb:t}};chrome.runtime.sendMessage(n)}},1e3);
