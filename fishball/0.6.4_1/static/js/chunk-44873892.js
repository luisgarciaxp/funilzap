import{r as s,W as _,R as o,d as tn,A as nn}from"./chunk-19c1a2bd.js";import{G as Ge,s as bt,c as B,ah as xt,Q as le,ai as rn,aj as an,ak as on,j as Le,z as sn,_ as R,a1 as It,M as Et,$ as ln,g as Z,b as wt,al as cn,am as un,an as dn,ao as fn,ap as mn,aq as pn,o as gn,U as hn,v as Ye,r as qe,i as vn,f as Cn,ar as yn}from"./chunk-31319f41.js";import{i as Y,l as At,m as bn,n as ye,u as q,P as K,f as se,g as z,d as St,e as xn,h as In,o as j,r as re,M as Xe,I as Fe}from"./chunk-9710b720.js";function ke(e,t){return Math.ceil(Math.random()*(t-e)+e)}async function Qe(e){return new Promise((t,n)=>{setTimeout(t,e)})}function En(e){return Ge({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#8BC34A",points:"24,3 28.7,6.6 34.5,5.8 36.7,11.3 42.2,13.5 41.4,19.3 45,24 41.4,28.7 42.2,34.5 36.7,36.7 34.5,42.2 28.7,41.4 24,45 19.3,41.4 13.5,42.2 11.3,36.7 5.8,34.5 6.6,28.7 3,24 6.6,19.3 5.8,13.5 11.3,11.3 13.5,5.8 19.3,6.6"}},{tag:"polygon",attr:{fill:"#CCFF90",points:"34.6,14.6 21,28.2 15.4,22.6 12.6,25.4 21,33.8 37.4,17.4"}}]})(e)}function wn(e){return Ge({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#D50000",d:"M24,6C14.1,6,6,14.1,6,24s8.1,18,18,18s18-8.1,18-18S33.9,6,24,6z M24,10c3.1,0,6,1.1,8.4,2.8L12.8,32.4 C11.1,30,10,27.1,10,24C10,16.3,16.3,10,24,10z M24,38c-3.1,0-6-1.1-8.4-2.8l19.6-19.6C36.9,18,38,20.9,38,24C38,31.7,31.7,38,24,38 z"}}]})(e)}function An(e){return Ge({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M247 24v15.2C134.4 43.81 43.81 134.4 39.2 247H24v18h15.2c4.61 112.6 95.2 203.2 207.8 207.8V488h18v-15.2c112.6-4.6 203.2-95.2 207.8-207.8H488v-18h-15.2C468.2 134.4 377.6 43.81 265 39.2V24h-18zm0 33.21V88h18V57.21C367.8 61.78 450.2 144.2 454.8 247H424v18h30.8c-4.6 102.8-87 185.2-189.8 189.8V424h-18v30.8c-102.8-4.6-185.22-87-189.79-189.8H88v-18H57.21C61.78 144.2 144.2 61.78 247 57.21zm9 52.79a64 64 0 0 0-64 64 64 64 0 0 0 38.1 58.5C172.6 280.9 161.9 349.6 176 406h160c14.1-56.4 3.3-125.2-54.1-173.6A64 64 0 0 0 320 174a64 64 0 0 0-64-64z"}}]})(e)}const Sn=bt.div`
  display: ${({isVisible:e})=>e?"flex":"none"};
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  position: absolute;
  z-index: 9999;
  backdrop-filter: blur(5px);
  #funnelPreviewContainer {
    width: 90%;
    max-width: 35rem;
    height: 100%;
    border-radius: 0.25rem;
    padding: 1rem;
    box-shadow: 0px 0px 15px -5px black;
    background: var(--background-default);
    color: var(--primary);
    display: grid;
    grid-template-rows: 2rem 6rem 1fr 1fr 4rem;
    place-items: center;
    h1 {
      color: var(--primary-strong);
      font-size: 1.5rem;
    }
    .profilePic {
      fill: var(--avatar-placeholder-primary);
      background: var(--avatar-placeholder-background);
      width: 5rem;
      height: 5rem;
      border-radius: 50%;
      &.profilePicDefault {
        padding: 0.5rem;
        box-sizing: border-box;
      }
    }
    #funnelDetails {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: center;
      .detailContainer {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        margin: 0.25rem 0;
        .detailsIcon {
          width: 1.25rem;
          height: 1.25rem;
          margin-right: 0.5rem;
          fill: var(--primary);
        }
        span {
          font-size: 1.25rem;
          font-weight: 400;
          strong {
            font-weight: 700;
          }
        }
      }
    }
    #warningsContainer {
      width: 100%;
      height: 100%;
      font-size: 0.75rem;
      display: grid;
      place-items: center;
      filter: brightness(0.8);

      table {
        height: 100%;
        width: 100%;
        table-layout: fixed;
        border-radius: 0.5rem;
        overflow: hidden;
        thead {
          th {
            padding: 0.5rem 0;
            font-size: 1rem;
            font-weight: 700;
            border-bottom: 0.5px solid var(--secondary);
            &.can {
              background: ${B(.9,"#09CAA7")};
            }
            &.cant {
              background: ${B(.9,"#FF5151")};
            }
            &.shouldnt {
              background: ${B(.9,"#EBC826")};
            }
            .thContainer {
              display: flex;
              align-items: center;
              justify-content: center;
              text-align: center;
              .thIconsContainer {
                width: 1rem;
                height: 1rem;
                .thIcons {
                  width: 100%;
                  height: 100%;
                }
              }
            }
          }
        }
        tbody {
          tr {
            &:not(:last-child) {
              td {
                border-bottom: 0.5px solid var(--secondary);
              }
            }
            td {
              padding: 0.25rem 0.5rem;
              &.can {
                background: ${B(.95,"#09CAA7")};
              }
              &.cant {
                background: ${B(.95,"#FF5151")};
              }
              &.shouldnt {
                background: ${B(.95,"#EBC826")};
              }
            }
          }
        }
      }
    }
    #actionContainer {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-evenly;
      button {
        width: 10rem;
        padding: 0.5rem;
        border-radius: 0.25rem;
        font-size: 1rem;
        font-weight: 600;
        color: var(--primary);
        transition: filter 0.2s;
        &:hover {
          filter: brightness(1.2);
        }
        &#cancelBtn {
          background: ${B(.3,"#FF5151")};
        }
        &#sendBtn {
          background: ${B(.3,"#09CAA7")};
        }
      }
    }
  }
`;let be=!1,ze=!1,H;const De={};function Ft(){if(be)return;const e="webpackChunkwhatsapp_web_client",t=window,n=t[e]=t[e]||[],r=Date.now();n.push([[r],{},async a=>{H=a,be=!0;const l=new Array(1e4).fill(1).map((i,c)=>i+c).filter(i=>{const c=H.u(i);return c.includes("undefined")?!1:c.includes("locales")?navigator.languages.some(m=>c.includes(`locales/${m}`)):!0});await Promise.all(l.reverse().map(i=>H.e(i))),ze=!0,window.ZVWAPI=await Tn()}])}Ft();const Pe=new Map;function kt(e){if(typeof H.m[e]>"u")return"";if(Pe.has(e))return Pe.get(e);const t=H.m[e].toString();return Pe.set(e,t),t}const Me=new Map;function Fn(e){if(Me.has(e))return Me.get(e);const t=/\w+\.(Pure)?Component\s*\{/,n=kt(e),r=t.test(n);return Me.set(e,r),r}function kn(e,t=!1){let n=Object.keys(H.m);t&&(n=n.reverse());const r=setTimeout(()=>{},500);for(const a of n)if(!Fn(a))try{const l=H(a);if(e(l,a))return clearTimeout(r),a}catch{continue}n=Object.keys(De);for(const a of n)try{const l=De[a];if(e(l,a))return a}catch{continue}return null}function Pn(e){return/^\d+$/.test(e)?H(e):De[e]}const Mn=[{id:"Store",conditions:e=>e.default&&e.default.Chat&&e.default.Msg?e.default:null},{id:"MediaCollection",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.processAttachments!==void 0?e.default:null},{id:"MediaProcess",conditions:e=>e.BLOB?e:null},{id:"ChatUtil",conditions:e=>e.sendClear&&moduleclearChat?e:null},{id:"GroupInvite",conditions:e=>e.sendQueryGroupInviteCode?e:null},{id:"Wap",conditions:e=>e.createGroup?e:null},{id:"ServiceWorker",conditions:e=>e.default&&e.default.killServiceWorker?e:null},{id:"State",conditions:e=>e.STATE&&e.STREAM?e:null},{id:"WapDelete",conditions:e=>e.sendConversationDelete&&e.sendConversationDelete.length==2?e:null},{id:"Conn",conditions:e=>e.default&&e.Conn||e.Conn&&e.ConnImpl?e.default:null},{id:"Clock",conditions:e=>e.Clock.globalUnixTime||e.default.globalUnixTime?e:null},{id:"Constants",conditions:e=>e.ACK.CLOCK===0?e:null},{id:"WapQuery",conditions:e=>e.default&&e.default.queryExist&&e.default.getCapabilities?e.default:null},{id:"CryptoLib",conditions:e=>e.decryptE2EMedia?e:null},{id:"OpenChat",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.openChat?e.default:null},{id:"UserConstructor",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.isServer&&e.default.prototype.isUser?e.default:null},{id:"sendTextMsgToChat",conditions:e=>e.sendTextMsgToChat?e.sendTextMsgToChat:null},{id:"SendSeen",conditions:e=>e.sendSeen?e.sendSeen:null},{id:"Archive",conditions:e=>e.setArchive?e:null},{id:"pinChat",conditions:e=>e.setPin.toString().includes(".unproxy")?e:null},{id:"sendDelete",conditions:e=>e.sendDelete?e.sendDelete:null},{id:"addAndSendMsgToChat",conditions:e=>e.addAndSendMsgToChat?e.addAndSendMsgToChat:null},{id:"sendMsgToChat",conditions:e=>e.sendMsgToChat?e.sendMsgToChat:null},{id:"Catalog",conditions:e=>e.Catalog?e.Catalog:null},{id:"Perfil",conditions:e=>e.__esModule===!0&&e.setPushname&&!e.getComposeContents?e:null},{id:"MsgHandler",conditions:e=>e.default&&typeof e.default.toString=="function"&&e.default.toString().includes("Msg:out of order ack")?e:null},{id:"MsgKey",conditions:e=>e.default&&typeof e.default.toString=="function"&&e.default.toString().includes("MsgKey error: obj is null/undefined")?e.default:null},{id:"Parser",conditions:e=>e.convertToTextWithoutSpecialEmojis?e.default:null},{id:"Builders",conditions:e=>e.TemplateMessage&&e.HydratedFourRowTemplate?e:null},{id:"Me",conditions:e=>e.PLATFORMS&&e.Conn?e.default:null},{id:"CallUtils",conditions:e=>e.sendCallEnd&&e.parseCall?e:null},{id:"Identity",conditions:e=>e.queryIdentity&&e.updateIdentity?e:null},{id:"MyStatus",conditions:e=>e.getStatus&&e.setMyStatus?e:null},{id:"ChatStates",conditions:e=>e.sendChatStatePaused&&e.sendChatStateRecording&&e.sendChatStateComposing?e:null},{id:"ChatPresence",conditions:e=>e.markComposing&&e.markPaused&&e.markRecording?e:null},{id:"GroupActions",conditions:e=>e.sendExitGroup&&e.localExitGroup?e:null},{id:"Features",conditions:e=>e.FEATURE_CHANGE_EVENT&&e.features?e:null},{id:"MessageUtils",conditions:e=>e.storeMessages&&e.appendMessage?e:null},{id:"WebMessageInfo",conditions:e=>e.WebMessageInfo&&e.WebFeatures?e.WebMessageInfo:null},{id:"createMessageKey",conditions:e=>e.createMessageKey&&e.createDeviceSentMessage?e.createMessageKey:null},{id:"Participants",conditions:e=>e.addParticipants&&e.removeParticipants&&e.promoteParticipants&&e.demoteParticipants?e:null},{id:"WidFactory",conditions:e=>e.isWidlike&&e.createWid&&e.createWidFromWidLike?e:null},{id:"Base",conditions:e=>e.setSubProtocol&&e.binSend&&e.actionNode?e:null},{id:"Base2",conditions:e=>e.supportsFeatureFlags&&e.parseMsgStubProto&&e.binSend&&e.subscribeLiveLocation?e:null},{id:"Versions",conditions:e=>e.loadProtoVersions&&e.default[15]&&e.default[16]&&e.default[17]?e:null},{id:"Sticker",conditions:e=>e.StickerCollection&&e.default?e:null},{id:"MediaObject",conditions:e=>e.getOrCreateMediaObject&&e.disassociateMediaFromStickerPack?e:null},{id:"MediaUpload",conditions:e=>e.default&&e.default.mediaUpload?e.default:null},{id:"UploadUtils",conditions:e=>e.default&&e.default.encryptAndUpload?e.default:null},{id:"Cmd",conditions:e=>e.default&&e.default.openChatFromUnread?e:null},{id:"ReadSeen",conditions:e=>e.sendSeen?e:null},{id:"Block",conditions:e=>e.blockContact&&e.unblockContact?e:null},{id:"BlockList",conditions:e=>e.BlocklistCollection?e:null},{id:"Theme",conditions:e=>e.getTheme&&e.setTheme?e:null},{id:"Vcard",conditions:e=>e.vcardFromContactModel?e:null},{id:"Profile",conditions:e=>e.sendSetPicture&&e.requestDeletePicture?e:null},{id:"SendMute",conditions:e=>e.sendConversationMute?e:null},{id:"Validators",conditions:e=>e.findLinks?e:null},{id:"Wap2",conditions:e=>e.Wap?e:null},{id:"LinkPreview",conditions:e=>e.findFirstWebLink?e:null},{id:"fetchLinkPreview",conditions:(e,t)=>{const n=kt(t);return n.includes(".genMinimalLinkPreview")&&n.includes(".getProductOrCatalogLinkPreview")},properties:e=>e.default},{id:"genId",conditions:e=>e.default&&typeof e.default=="function"&&typeof e.default.toString=="function"&&e.default.toString().match(/crypto/)?e:null},{id:"GroupMetadata",conditions:e=>e.default&&e.default.handlePendingInvite?e:null},{id:"i10n",conditions:e=>e.default&&e.default.downloadAppLocale?e.default:null},{id:"NetworkStatus",conditions:e=>e.default&&e.default._logOnlineOffline?e.default:null},{id:"Stream",conditions:e=>e.default&&e.default.unobscure?e.default:null},{id:"ws2",conditions:e=>e.default&&e.default.destroyStorage?e.default:null},{id:"BlobCache",conditions:e=>e.default&&e.default.getOrCreateURL?e.default:null},{id:"UserPrefs",conditions:e=>e.getMaybeMeUser?e:null},{id:"randomMessageId",conditions:e=>e.randomId||e.default.randomId?e:null},{id:"sendSetGroupSubject",conditions:e=>e.sendSetGroupSubject},{id:"sendSetGroupProperty",conditions:e=>e.sendSetGroupProperty},{id:"sendSetGroupDescription",conditions:e=>e.sendSetGroupDescription},{id:"changeEphemeralDuration",conditions:e=>e.changeEphemeralDuration},{id:"sendCallSignalingMsg",conditions:e=>e.sendCallSignalingMsg},{id:"sendQueryExists",conditions:e=>e.queryExists&&e.queryPhoneExists||e.queryWidExists&&e.queryPhoneExists,properties:e=>e.queryExists||e.queryWidExists},{id:"findChat",conditions:e=>e.findChat?e.findChat:null},{id:"sendCreateGroup",conditions:e=>e.sendCreateGroup},{id:"msgFindQuery",conditions:e=>e.msgFindQuery&&e.msgFindByIds?e.msgFindQuery:null}];let P={};async function Tn(){if(be&&ze)try{return P=Mn.reduce((t,n)=>{const r=kn(n.conditions);if(!r)return t;const a=Pn(r),l=n.properties?n.properties(a):n.conditions(a);return l&&(n.id==="Store"?t.wapi={...t.wapi,...l}:t.wapi[n.id]=l),t},{wapi:{}}).wapi,P}catch(e){console.log(e)}}function X(){return P.Chat.getModelsArray().find(t=>t.active)}function Wn({funnel:e,setFunnelPopUp:t}){var p,w,b;const[n,r]=s.exports.useState(!1),[a,l]=s.exports.useState(0),[i,c]=s.exports.useState(0),[m,u]=s.exports.useState(0),[d,h]=s.exports.useState(""),[x,v]=s.exports.useState(),[I,f]=s.exports.useState();return s.exports.useEffect(()=>{var g;try{r(!0);const C=X();if(!e||!C){e?C||_.error("Nenhum chat aberto para enviar o funil, clique na conversa desejada antes de enviar"):_.error("Funil carregado incorretamente, recarregue a p\xE1gina e tente novamente"),f(void 0),t(void 0),r(!1);return}f(C);const y=(g=e==null?void 0:e.data)==null?void 0:g.reduce((A,S)=>A+S.delay,0);l(y!=null?y:0)}catch(C){console.log(C),_.error(C.toString()),f(void 0),t(void 0),r(!1)}},[e]),s.exports.useEffect(()=>{c(Math.floor(a/1e3/60)),u(Math.floor(a/1e3%60));const g=new Date;g.setMilliseconds(g.getUTCMilliseconds()+a),h(g.toLocaleString())},[a]),s.exports.useEffect(()=>{const g=I&&P.ProfilePicThumb.getModelsArray().find(C=>C.id._serialized===I.id._serialized);v((g==null?void 0:g.img)||void 0)},[e,I]),o.createElement(Sn,{isVisible:n},e&&I?o.createElement("div",{id:"funnelPreviewContainer"},o.createElement("h1",null,"Confirma o envio do funil abaixo?"),x?o.createElement("img",{src:x,alt:I.formattedTitle,className:"profilePic"}):o.createElement(xt,{className:"profilePic profilePicDefault"}),o.createElement("div",{id:"funnelDetails"},o.createElement("div",{className:" detailContainer recipient"},o.createElement(An,{className:"detailsIcon"}),o.createElement("span",null,"Destinat\xE1rio:"," ",o.createElement("strong",null,I.formattedTitle,((p=I.contact)==null?void 0:p.isAddressBookContact)===0&&((w=I.contact)==null?void 0:w.notifyName)&&` ( ${(b=I.contact)==null?void 0:b.notifyName} )`))),o.createElement("div",{className:" detailContainer funnelName"},o.createElement(le,{className:"detailsIcon"}),o.createElement("span",null,"Funil: ",o.createElement("strong",null,e.name))),o.createElement("div",{className:" detailContainer duration"},o.createElement(rn,{className:"detailsIcon"}),o.createElement("span",null,"Dura\xE7\xE3o:"," ",o.createElement("strong",null,i>0&&`${i} min e `," ",m," ","seg"))),o.createElement("div",{className:" detailContainer deadline"},o.createElement(an,{className:"detailsIcon"}),o.createElement("span",null,"T\xE9rmino: ",o.createElement("strong",null,d)))),o.createElement("div",{id:"warningsContainer"},o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",{className:"can"},o.createElement("div",{className:"thContainer"},o.createElement("div",{className:"thIconsContainer"},o.createElement(En,{className:"thIcons"})),"Voc\xEA pode")),o.createElement("th",{className:"cant"},o.createElement("div",{className:"thContainer"},o.createElement("div",{className:"thIconsContainer"},o.createElement(wn,{className:"thIcons"})),"N\xE3o pode")),o.createElement("th",{className:"shouldnt"},o.createElement("div",{className:"thContainer"},o.createElement("div",{className:"thIconsContainer"},o.createElement(on,{fill:"#EBC826",className:"thIcons"})),"N\xE3o recomendado")))),o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",{className:"can"},"Continuar a utilizar o whatsapp normalmente."),o.createElement("td",{className:"cant"},"Recarregar a p\xE1gina do whatsapp web ",o.createElement("br",null),"(isso cancelar\xE1 todos os funis atuais)"),o.createElement("td",{className:"shouldnt"},"Disparar muitos funis ao mesmo tempo ",o.createElement("br",null),"(m\xE9dia simultanea recomendada: 10)")),o.createElement("tr",null,o.createElement("td",{className:"can"},"Enviar mensagens e funis para outros chats ao mesmo tempo."),o.createElement("td",{className:"cant"},"Fechar o whatsapp web ",o.createElement("br",null),"(isso cancelar\xE1 todos os funis atuais)"),o.createElement("td",{className:"shouldnt"},"Enviar funis para usu\xE1rios que n\xE3o aceitaram receber mensagens (Spam)")),o.createElement("tr",null,o.createElement("td",{className:"can"},"Vender muito e continuar encantando seus clientes com seu atendimento."),o.createElement("td",{className:"cant"}),o.createElement("td",{className:"shouldnt"},"Sair da aba do web whatsapp durante os disparos"))))),o.createElement("div",{id:"actionContainer"},o.createElement("button",{type:"button",id:"cancelBtn",onClick:()=>{r(!1),t(void 0)}},"Cancelar"),o.createElement("button",{type:"button",id:"sendBtn",onClick:()=>{we.add(e,I.id.toString()),r(!1),t(void 0)}},"Enviar"))):o.createElement("h1",null,"Carregando..."))}function _n(e){if(!e)return;let t=e;if(P.WidFactory.isWidlike(t))return P.WidFactory.createWidFromWidLike(t);if(t&&typeof t=="object"&&typeof t._serialized=="object"&&(t=t._serialized),typeof t=="string"){if(/^\d+$/.test(t))return P.WidFactory.createUserWid(t,"c.us");if(/^\d+-\d+$/.test(t))return P.WidFactory.createUserWid(t,"g.us");if(/status$/.test(t))return P.WidFactory.createUserWid(t,"broadcast")}}function Nn(e){const t=_n(e);if(!!t)return t}async function Vn(e){const t=Nn(e);return await P.findChat(t)}function Je(e){if(!e)return!1;e=typeof e=="string"?e:e._serialized;const t=P.Chat.get(e);return t&&(t.sendMessage=t.sendMessage?t.sendMessage:function(){return P.sendTextMsgToChat(this,...arguments)}),t}async function He(e){if(!e)return;let t=e,n=await Je(t);if(!n&&!t.includes("@g")){const r=await P.sendQueryExists(t);if(!r)return;await Vn(r.wid),t=r.wid._serialized,n=await Je(t)}return n}function Q(e,t){this._waveformData=e,this._channelIndex=t}Q.prototype.min_sample=function(e){var t=(e*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._at(t)};Q.prototype.max_sample=function(e){var t=(e*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._at(t)};Q.prototype.set_min_sample=function(e,t){var n=(e*this._waveformData.channels+this._channelIndex)*2;return this._waveformData._set_at(n,t)};Q.prototype.set_max_sample=function(e,t){var n=(e*this._waveformData.channels+this._channelIndex)*2+1;return this._waveformData._set_at(n,t)};Q.prototype.min_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2)};Q.prototype.max_array=function(){return this._waveformData._offsetValues(0,this._waveformData.length,this._channelIndex*2+1)};var J=127,ce=-128;function Rn(e,t){var n=Math.floor(e/t),r=e-n*t;return r>0&&n++,n}function Bn(e){var t=e.scale,n=e.amplitude_scale,r=e.split_channels,a=e.length,l=e.sample_rate,i=e.channels.map(function(y){return new Float32Array(y)}),c=r?i.length:1,m=c===1?1:2,u=m===1?20:24,d=Rn(a,t),h=u+d*2*c,x=new ArrayBuffer(h),v=new DataView(x),I=0,f=u,p,w,b=new Array(c),g=new Array(c);for(p=0;p<c;p++)b[p]=1/0,g[p]=-1/0;for(v.setInt32(0,m,!0),v.setUint32(4,1,!0),v.setInt32(8,l,!0),v.setInt32(12,t,!0),v.setInt32(16,d,!0),m===2&&v.setInt32(20,c,!0),w=0;w<a;w++){var C=0;if(c===1){for(p=0;p<i.length;++p)C+=i[p][w];C=Math.floor(J*C*n/i.length),C<b[0]&&(b[0]=C,b[0]<ce&&(b[0]=ce)),C>g[0]&&(g[0]=C,g[0]>J&&(g[0]=J))}else for(p=0;p<c;++p)C=Math.floor(J*i[p][w]*n),C<b[p]&&(b[p]=C,b[p]<ce&&(b[p]=ce)),C>g[p]&&(g[p]=C,g[p]>J&&(g[p]=J));if(++I===t){for(p=0;p<c;p++)v.setInt8(f++,b[p]),v.setInt8(f++,g[p]),b[p]=1/0,g[p]=-1/0;I=0}}if(I>0)for(p=0;p<c;p++)v.setInt8(f++,b[p]),v.setInt8(f++,g[p]);return x}function oe(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oe=function(t){return typeof t}:oe=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(e)}function Dn(e){return e&&oe(e)==="object"&&"sample_rate"in e&&"samples_per_pixel"in e&&"bits"in e&&"length"in e&&"data"in e}function Zn(e){var t=e&&oe(e)==="object"&&"byteLength"in e;if(t){var n=new DataView(e),r=n.getInt32(0,!0);if(r!==1&&r!==2)throw new TypeError("WaveformData.create(): This waveform data version not supported")}return t}function On(e){var t=e.data,n=e.channels||1,r=24,a=e.bits===8?1:2,l=e.length*2*n;if(t.length!==l)throw new Error("WaveformData.create(): Length mismatch in JSON waveform data");var i=r+t.length*a,c=new ArrayBuffer(i),m=new DataView(c);m.setInt32(0,2,!0),m.setUint32(4,e.bits===8,!0),m.setInt32(8,e.sample_rate,!0),m.setInt32(12,e.samples_per_pixel,!0),m.setInt32(16,e.length,!0),m.setInt32(20,n,!0);var u=r,d;if(e.bits===8)for(d=0;d<t.length;d++)m.setInt8(u++,t[d],!0);else for(d=0;d<t.length;d++)m.setInt16(u,t[d],!0),u+=2;return c}function Gn(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),a=0,l=n.length;a<l;++a)r[a]=n.charCodeAt(a);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}function Ln(e,t,n){var r=t===void 0?null:t,a=n===void 0?!1:n,l=Gn(e,a),i=l.indexOf(`
`,10)+1,c=l.substring(i)+(r?"//# sourceMappingURL="+r:""),m=new Blob([c],{type:"application/javascript"});return URL.createObjectURL(m)}function Yn(e,t,n){var r;return function(l){return r=r||Ln(e,t,n),new Worker(r,l)}}var Xn=Yn("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogQXVkaW9CdWZmZXItYmFzZWQgV2F2ZWZvcm1EYXRhIGdlbmVyYXRvcgogICAqCiAgICogQWRhcHRlZCBmcm9tIEJsb2NrRmlsZTo6Q2FsY1N1bW1hcnkgaW4gQXVkYWNpdHksIHdpdGggcGVybWlzc2lvbi4KICAgKiBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9hdWRhY2l0eS9zb3VyY2UvYnJvd3NlL2F1ZGFjaXR5LXNyYy90cnVuay9zcmMvQmxvY2tGaWxlLmNwcAogICAqLwogIHZhciBJTlQ4X01BWCA9IDEyNzsKICB2YXIgSU5UOF9NSU4gPSAtMTI4OwoKICBmdW5jdGlvbiBjYWxjdWxhdGVXYXZlZm9ybURhdGFMZW5ndGgoYXVkaW9fc2FtcGxlX2NvdW50LCBzY2FsZSkgewogICAgdmFyIGRhdGFfbGVuZ3RoID0gTWF0aC5mbG9vcihhdWRpb19zYW1wbGVfY291bnQgLyBzY2FsZSk7CiAgICB2YXIgc2FtcGxlc19yZW1haW5pbmcgPSBhdWRpb19zYW1wbGVfY291bnQgLSBkYXRhX2xlbmd0aCAqIHNjYWxlOwoKICAgIGlmIChzYW1wbGVzX3JlbWFpbmluZyA+IDApIHsKICAgICAgZGF0YV9sZW5ndGgrKzsKICAgIH0KCiAgICByZXR1cm4gZGF0YV9sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZVdhdmVmb3JtRGF0YShvcHRpb25zKSB7CiAgICB2YXIgc2NhbGUgPSBvcHRpb25zLnNjYWxlOwogICAgdmFyIGFtcGxpdHVkZV9zY2FsZSA9IG9wdGlvbnMuYW1wbGl0dWRlX3NjYWxlOwogICAgdmFyIHNwbGl0X2NoYW5uZWxzID0gb3B0aW9ucy5zcGxpdF9jaGFubmVsczsKICAgIHZhciBsZW5ndGggPSBvcHRpb25zLmxlbmd0aDsKICAgIHZhciBzYW1wbGVfcmF0ZSA9IG9wdGlvbnMuc2FtcGxlX3JhdGU7CiAgICB2YXIgY2hhbm5lbHMgPSBvcHRpb25zLmNoYW5uZWxzLm1hcChmdW5jdGlvbiAoY2hhbm5lbCkgewogICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShjaGFubmVsKTsKICAgIH0pOwogICAgdmFyIG91dHB1dF9jaGFubmVscyA9IHNwbGl0X2NoYW5uZWxzID8gY2hhbm5lbHMubGVuZ3RoIDogMTsKICAgIHZhciB2ZXJzaW9uID0gb3V0cHV0X2NoYW5uZWxzID09PSAxID8gMSA6IDI7CiAgICB2YXIgaGVhZGVyX3NpemUgPSB2ZXJzaW9uID09PSAxID8gMjAgOiAyNDsKICAgIHZhciBkYXRhX2xlbmd0aCA9IGNhbGN1bGF0ZVdhdmVmb3JtRGF0YUxlbmd0aChsZW5ndGgsIHNjYWxlKTsKICAgIHZhciB0b3RhbF9zaXplID0gaGVhZGVyX3NpemUgKyBkYXRhX2xlbmd0aCAqIDIgKiBvdXRwdXRfY2hhbm5lbHM7CiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRvdGFsX3NpemUpOwogICAgdmFyIGRhdGFfdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpOwogICAgdmFyIHNjYWxlX2NvdW50ZXIgPSAwOwogICAgdmFyIG9mZnNldCA9IGhlYWRlcl9zaXplOwogICAgdmFyIGNoYW5uZWwsIGk7CiAgICB2YXIgbWluX3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CiAgICB2YXIgbWF4X3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CgogICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICBtYXhfdmFsdWVbY2hhbm5lbF0gPSAtSW5maW5pdHk7CiAgICB9CgogICAgZGF0YV92aWV3LnNldEludDMyKDAsIHZlcnNpb24sIHRydWUpOyAvLyBWZXJzaW9uCgogICAgZGF0YV92aWV3LnNldFVpbnQzMig0LCAxLCB0cnVlKTsgLy8gSXMgOCBiaXQ/CgogICAgZGF0YV92aWV3LnNldEludDMyKDgsIHNhbXBsZV9yYXRlLCB0cnVlKTsgLy8gU2FtcGxlIHJhdGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTIsIHNjYWxlLCB0cnVlKTsgLy8gU2NhbGUKCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTYsIGRhdGFfbGVuZ3RoLCB0cnVlKTsgLy8gTGVuZ3RoCgogICAgaWYgKHZlcnNpb24gPT09IDIpIHsKICAgICAgZGF0YV92aWV3LnNldEludDMyKDIwLCBvdXRwdXRfY2hhbm5lbHMsIHRydWUpOwogICAgfQoKICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgc2FtcGxlID0gMDsKCiAgICAgIGlmIChvdXRwdXRfY2hhbm5lbHMgPT09IDEpIHsKICAgICAgICBmb3IgKGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgY2hhbm5lbHMubGVuZ3RoOyArK2NoYW5uZWwpIHsKICAgICAgICAgIHNhbXBsZSArPSBjaGFubmVsc1tjaGFubmVsXVtpXTsKICAgICAgICB9CgogICAgICAgIHNhbXBsZSA9IE1hdGguZmxvb3IoSU5UOF9NQVggKiBzYW1wbGUgKiBhbXBsaXR1ZGVfc2NhbGUgLyBjaGFubmVscy5sZW5ndGgpOwoKICAgICAgICBpZiAoc2FtcGxlIDwgbWluX3ZhbHVlWzBdKSB7CiAgICAgICAgICBtaW5fdmFsdWVbMF0gPSBzYW1wbGU7CgogICAgICAgICAgaWYgKG1pbl92YWx1ZVswXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgIG1pbl92YWx1ZVswXSA9IElOVDhfTUlOOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHNhbXBsZSA+IG1heF92YWx1ZVswXSkgewogICAgICAgICAgbWF4X3ZhbHVlWzBdID0gc2FtcGxlOwoKICAgICAgICAgIGlmIChtYXhfdmFsdWVbMF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICBtYXhfdmFsdWVbMF0gPSBJTlQ4X01BWDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgKytjaGFubmVsKSB7CiAgICAgICAgICBzYW1wbGUgPSBNYXRoLmZsb29yKElOVDhfTUFYICogY2hhbm5lbHNbY2hhbm5lbF1baV0gKiBhbXBsaXR1ZGVfc2NhbGUpOwoKICAgICAgICAgIGlmIChzYW1wbGUgPCBtaW5fdmFsdWVbY2hhbm5lbF0pIHsKICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gc2FtcGxlOwoKICAgICAgICAgICAgaWYgKG1pbl92YWx1ZVtjaGFubmVsXSA8IElOVDhfTUlOKSB7CiAgICAgICAgICAgICAgbWluX3ZhbHVlW2NoYW5uZWxdID0gSU5UOF9NSU47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2FtcGxlID4gbWF4X3ZhbHVlW2NoYW5uZWxdKSB7CiAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IHNhbXBsZTsKCiAgICAgICAgICAgIGlmIChtYXhfdmFsdWVbY2hhbm5lbF0gPiBJTlQ4X01BWCkgewogICAgICAgICAgICAgIG1heF92YWx1ZVtjaGFubmVsXSA9IElOVDhfTUFYOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoKytzY2FsZV9jb3VudGVyID09PSBzY2FsZSkgewogICAgICAgIGZvciAoY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBvdXRwdXRfY2hhbm5lbHM7IGNoYW5uZWwrKykgewogICAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgICBkYXRhX3ZpZXcuc2V0SW50OChvZmZzZXQrKywgbWF4X3ZhbHVlW2NoYW5uZWxdKTsKICAgICAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICAgICAgbWF4X3ZhbHVlW2NoYW5uZWxdID0gLUluZmluaXR5OwogICAgICAgIH0KCiAgICAgICAgc2NhbGVfY291bnRlciA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc2NhbGVfY291bnRlciA+IDApIHsKICAgICAgZm9yIChjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1pbl92YWx1ZVtjaGFubmVsXSk7CiAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1heF92YWx1ZVtjaGFubmVsXSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnVmZmVyOwogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24gb25tZXNzYWdlKGV2dCkgewogICAgdmFyIGJ1ZmZlciA9IGdlbmVyYXRlV2F2ZWZvcm1EYXRhKGV2dC5kYXRhKTsgLy8gVHJhbnNmZXIgYnVmZmVyIHRvIHRoZSBjYWxsaW5nIHRocmVhZAoKICAgIHRoaXMucG9zdE1lc3NhZ2UoYnVmZmVyLCBbYnVmZmVyXSk7CiAgICB0aGlzLmNsb3NlKCk7CiAgfTsKCn0pKCk7Cgo=",null,!1);function L(e){if(Dn(e)&&(e=On(e)),Zn(e)){this._data=new DataView(e),this._offset=this._version()===2?24:20,this._channels=[];for(var t=0;t<this.channels;t++)this._channels[t]=new Q(this,t)}else throw new TypeError("WaveformData.create(): Unknown data format")}var ue={scale:512,amplitude_scale:1,split_channels:!1,disable_worker:!1};function zn(e){var t={scale:e.scale||ue.scale,amplitude_scale:e.amplitude_scale||ue.amplitude_scale,split_channels:e.split_channels||ue.split_channels,disable_worker:e.disable_worker||ue.disable_worker};return t}function Hn(e){for(var t=[],n=0;n<e.numberOfChannels;++n)t.push(e.getChannelData(n).buffer);return t}function Pt(e,t,n){var r=Hn(e);if(t.disable_worker){var a=Bn({scale:t.scale,amplitude_scale:t.amplitude_scale,split_channels:t.split_channels,length:e.length,sample_rate:e.sampleRate,channels:r});n(null,new L(a),e)}else{var l=new Xn;l.onmessage=function(i){n(null,new L(i.data),e)},l.postMessage({scale:t.scale,amplitude_scale:t.amplitude_scale,split_channels:t.split_channels,length:e.length,sample_rate:e.sampleRate,channels:r},r)}}function Kn(e,t,n,r){function a(l){l||(l=new DOMException("EncodingError")),r(l)}e.decodeAudioData(t,function(l){Pt(l,n,r)},a)}L.create=function(t){return new L(t)};L.createFromAudio=function(e,t){var n=zn(e);if(e.audio_context&&e.array_buffer)return Kn(e.audio_context,e.array_buffer,n,t);if(e.audio_buffer)return Pt(e.audio_buffer,n,t);throw new TypeError("WaveformData.createFromAudio(): Pass either an AudioContext and ArrayBuffer, or an AudioBuffer object")};L.prototype={resample:function(t){if(t.scale=typeof t.scale=="number"?t.scale:null,t.width=typeof t.width=="number"?t.width:null,t.width!=null&&t.width<=0)throw new RangeError("WaveformData.resample(): width should be a positive integer value");if(t.scale!=null&&t.scale<=0)throw new RangeError("WaveformData.resample(): scale should be a positive integer value");if(!t.scale&&!t.width)throw new Error("WaveformData.resample(): Missing scale or width option");var n=t.scale||Math.floor(this.duration*this.sample_rate/t.width),r=this.scale,a=this.length,l=a*this.scale,i=Math.ceil(l/n),c=24,m=this.bits===8?1:2,u=c+i*2*this.channels*m,d=new ArrayBuffer(u),h=new DataView(d);h.setInt32(0,2,!0),h.setUint32(4,this.bits===8,!0),h.setInt32(8,this.sample_rate,!0),h.setInt32(12,n,!0),h.setInt32(16,i,!0),h.setInt32(20,this.channels,!0);var x=new L(d),v=0,I=0,f=this.channels,p=new Array(f),w=new Array(f),b;for(b=0;b<f;++b)a>0?(p[b]=this.channel(b).min_sample(v),w[b]=this.channel(b).max_sample(v)):(p[b]=0,w[b]=0);var g=this.bits===8?-128:-32768,C=this.bits===8?127:32767;if(n<r)throw new Error("WaveformData.resample(): Zoom level "+n+" too low, minimum: "+r);var y,A,S,E,k;function F(T){return Math.floor(T*n)}for(;v<a;){for(;Math.floor(F(I)/r)===v;){if(I>0)for(b=0;b<f;++b)x.channel(b).set_min_sample(I-1,p[b]),x.channel(b).set_max_sample(I-1,w[b]);if(k=v,I++,y=F(I),A=F(I-1),y!==A)for(b=0;b<f;++b)p[b]=C,w[b]=g}for(y=F(I),S=Math.floor(y/r),S>a&&(S=a);v<S;){for(b=0;b<f;++b)E=this.channel(b).min_sample(v),E<p[b]&&(p[b]=E),E=this.channel(b).max_sample(v),E>w[b]&&(w[b]=E);v++}}if(v!==k)for(b=0;b<f;++b)x.channel(b).set_min_sample(I-1,p[b]),x.channel(b).set_max_sample(I-1,w[b]);return x},concat:function(){var t=this,n=Array.prototype.slice.call(arguments);n.forEach(function(a){if(t.channels!==a.channels||t.sample_rate!==a.sample_rate||t.bits!==a.bits||t.scale!==a.scale)throw new Error("WaveformData.concat(): Waveforms are incompatible")});var r=this._concatBuffers.apply(this,n);return L.create(r)},_concatBuffers:function(){var t=Array.prototype.slice.call(arguments),n=this._offset,r=n,a=0,l=[this].concat(t).map(function(I){return I._data.buffer}),i,c;for(i=0;i<l.length;i++){c=l[i];var m=new DataView(c).getInt32(16,!0);r+=c.byteLength-n,a+=m}var u=new ArrayBuffer(r),d=new DataView(l[0]),h=new DataView(u);for(i=0;i<n;i++)h.setUint8(i,d.getUint8(i));h.setInt32(16,a,!0);var x=0,v=new Uint8Array(u,n);for(i=0;i<l.length;i++)c=l[i],v.set(new Uint8Array(c,n),x),x+=c.byteLength-n;return u},_offsetValues:function(t,n,r){var a=[],l=this.channels;r+=t*l*2;for(var i=0;i<n;i++)a.push(this._at(i*l*2+r));return a},_version:function(){return this._data.getInt32(0,!0)},get length(){return this._data.getUint32(16,!0)},get bits(){var e=Boolean(this._data.getUint32(4,!0));return e?8:16},get duration(){return this.length*this.scale/this.sample_rate},get pixels_per_second(){return this.sample_rate/this.scale},get seconds_per_pixel(){return this.scale/this.sample_rate},get channels(){return this._version()===2?this._data.getInt32(20,!0):1},channel:function(t){if(t>=0&&t<this._channels.length)return this._channels[t];throw new RangeError("Invalid channel: "+t)},get sample_rate(){return this._data.getInt32(8,!0)},get scale(){return this._data.getInt32(12,!0)},_at:function(t){return this.bits===8?this._data.getInt8(this._offset+t):this._data.getInt16(this._offset+t*2,!0)},_set_at:function(t,n){return this.bits===8?this._data.setInt8(this._offset+t,n):this._data.setInt16(this._offset+t*2,n,!0)},at_time:function(t){return Math.floor(t*this.sample_rate/this.scale)},time:function(t){return t*this.scale/this.sample_rate},toJSON:function(){for(var t={version:2,channels:this.channels,sample_rate:this.sample_rate,samples_per_pixel:this.scale,bits:this.bits,length:this.length,data:[]},n=0;n<this.length;n++)for(var r=0;r<this.channels;r++)t.data.push(this.channel(r).min_sample(n)),t.data.push(this.channel(r).max_sample(n));return t},toArrayBuffer:function(){return this._data.buffer}};function jn(e){let t=0;for(const n in e)Number.isNaN(e[n])||(t+=e[n]<0?e[n]*-1:e[n]);return t}function Un(e){return new Promise((t,n)=>{const r=new AudioContext;e.arrayBuffer().then(async a=>{const l={audio_context:r,array_buffer:a};L.createFromAudio(l,(i,c)=>{if(i)n(i);else{const m=new Int8Array(c._data.buffer),u=new Uint8Array(64);let d=0;const h=Math.floor(m.length/64);for(let v=0,I=0;v+h<=m.length;v+=h,I+=1){const f=m.slice(v,v+h),p=jn(f)/f.length;u[I]=p,p>d&&(d=p)}const x=100/d;for(let v=0;v<u.length;v++)u[v]=u[v]*x;t(u)}})})})}async function Ke(e,t){const n=Array.isArray(t)?t:[t],r=new P.MediaCollection({chatParticipantCount:e.getParticipantCount()});return await r.processAttachments(n.map(a=>({file:a})),e,1),r}async function $n(e,t){const n=await Le(e),a=(await Ke(t,n)).getModelsArray()[0];a.mediaPrep._mediaData.type="ptt";try{const i=await Un(n);i&&(a.mediaPrep._mediaData.waveform=i)}catch(i){console.log(i)}const l=await a.sendToChat(t,{quotedMsg:t.composeQuotedMsg});return t.composeQuotedMsg=null,l}async function qn(e,t,n){const r=await Le(e,n),l=(await Ke(t,r)).getModelsArray()[0];l.mediaPrep._mediaData.type="document",l.mediaPrep._mediaData.filename=n;const i=await l.sendToChat(t,{quotedMsg:t.composeQuotedMsg});return t.composeQuotedMsg=null,i}async function et(e,t,n){const r=await Le(e),i=await(await Ke(t,r)).getModelsArray()[0].sendToChat(t,{quotedMsg:t.composeQuotedMsg,caption:n});return t.composeQuotedMsg=null,i}async function Qn(e,t){var a;let n;try{const l=await((a=P.LinkPreview)==null?void 0:a.findFirstWebLink(e));n=l&&await P.fetchLinkPreview(l)}catch(l){console.log(l)}const r=await P.sendTextMsgToChat(t,e,{quotedMsg:t.composeQuotedMsg,linkPreview:n==null?void 0:n.data});return t.composeQuotedMsg=null,r}const O=window.localStorage.getItem("ZVExtensionId")||"",Jn=0>=O.indexOf("febglfjdlgcbli")&&0>=O.indexOf("milglmkiipgoia")&&0>=O.indexOf("fsoiwefnosklsd")&&0>=O.indexOf("2hudj89jfjiodsf")&&0>=O.indexOf("dfsh2ojisddljls");async function er(){return new Promise(e=>{Jn&&chrome.runtime.sendMessage(O,{type:"saveValidOnStorage"}),chrome.runtime.sendMessage(O,{type:"checkPremium"},({type:t,response:n})=>{t==="checkPremium"&&e(n)})})}const Mt=s.exports.createContext({});function tr({children:e}){const[t,n]=s.exports.useState(!1),[r,a]=s.exports.useState(""),l=s.exports.useCallback(()=>!!t,[t,r]);function i(){t||er().then(({premium:m,data:u})=>{a(u),n(!!m)})}s.exports.useEffect(()=>{!r&&!t&&i()});const c={isPremium:t,keyData:r,refreshPremium:i,getPremium:l};return o.createElement(Mt.Provider,{value:c},e)}function je(){return s.exports.useContext(Mt)}async function nr(){return new Promise((e,t)=>{chrome.runtime.sendMessage(O,{type:"getIndexesFromStorage"},async({type:n,response:r})=>n==="getIndexesFromStorage"&&e(r))})}async function rr({message:e}){return new Promise((t,n)=>{chrome.runtime.sendMessage(O,{type:"checkTriggersShouldFireByMessage",data:{message:e}},async({type:r,response:a})=>r==="checkTriggersShouldFireByMessage"&&t(a))})}const ie={shouldHideShortcuts:"GCZVshouldHideShortcuts",shouldAskToSendShortcuts:"GCZVshouldAskToSendShortcuts",shouldHideCurrentFunnelPopover:"GCZVshouldHideCurrentFunnelPopover"},Tt=s.exports.createContext({});function Te(e,t){e?window.localStorage.removeItem(ie[t]):window.localStorage.setItem(ie[t],"true")}function ar({children:e}){const[t,n]=s.exports.useState(!!window.localStorage.getItem(ie.shouldHideShortcuts)),[r,a]=s.exports.useState(!!window.localStorage.getItem(ie.shouldHideCurrentFunnelPopover)),[l,i]=s.exports.useState(!!window.localStorage.getItem(ie.shouldAskToSendShortcuts));function c(){a(h=>(Te(h,"shouldHideCurrentFunnelPopover"),!h))}function m(){n(h=>{var v,I;Te(h,"shouldHideShortcuts");const x=document.querySelector("#main");return h?(v=x==null?void 0:x.parentElement)==null||v.classList.add("zvWithShortcuts"):(I=x==null?void 0:x.parentElement)==null||I.classList.remove("zvWithShortcuts"),!h})}function u(){i(h=>(Te(h,"shouldAskToSendShortcuts"),!h))}const d={shouldHideShortcuts:t,toggleShouldHideShortcuts:m,shouldAskToSendShortcuts:l,toggleShouldAskToSendShortcuts:u,shouldHideCurrentFunnelPopover:r,toggleShouldHideCurrentFunnelPopover:c};return o.createElement(Tt.Provider,{value:d},e)}function Ue(){return s.exports.useContext(Tt)}function or(e){return o.createElement("svg",{width:719,height:721,viewBox:"0 0 719 721",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M578.096 73.079c-1.435.126-16.154 8.645-32.71 18.93-16.558 10.287-31.697 19.395-33.644 20.241l-3.54 1.537-12.911-6.639c-17.291-8.892-15.827-5.226-19.427-48.686-3.153-38.055-3.735-41.37-7.673-43.643C465.925 13.51 403.479.52 398.661.355c-6.131-.21-6.235-.047-24.814 39.008-17.958 37.748-14.518 34.387-37.127 36.263-17.618 1.46-15.058 3.391-41.835-31.539-23.454-30.595-25.658-32.823-31.322-31.652-5.702 1.178-62.985 23.833-64.69 25.583-2.967 3.05-2.844 5.96 1.774 42.183 5.539 43.46 6.515 39.026-11.633 52.847-18.509 14.096-13.412 14.204-56.398-1.198-37.57-13.461-38.23-13.607-42.842-9.456-8.852 7.967-42.278 56.269-40.477 58.491.572.707 11.767 14.074 24.878 29.703 29.088 34.674 27.352 30.18 19.893 51.492-9.564 27.329-3.904 23.615-53.245 34.944-23.023 5.286-32.597 7.965-34.488 9.652-2.913 2.6-7.188 62.986-4.951 69.964 1.394 4.351.236 3.879 39.604 16.174 42.113 13.152 37.71 9.558 44.18 36.059 6.307 25.827 8.46 20.81-22.523 52.483-27.166 27.772-27.826 28.549-27.487 32.408.375 4.282 32.333 57.209 35.775 59.249 2.762 1.636 5.497 1.053 39.448-8.403 44.023-12.264 38.526-12.739 57.819 4.996 20.621 18.957 19.569 12.679 9.824 58.674-5.758 27.178-6.953 34.493-6.092 37.322l1.071 3.519 14.985 8.046c15.637 8.397 41.556 20.256 45.752 20.935 4.423.715 7.288-1.923 32.016-29.458 30.789-34.286 24.795-31.05 50.007-26.999 24.66 3.962 21.524.653 35.813 37.791 14.859 38.619 14.929 38.776 18.187 40.657 2.67 1.542 64.733-5.024 70.548-7.463 3.796-1.593 5.147-6.849 10.879-42.343 7.039-43.581 5.506-40.331 22.598-47.939 23.526-10.472 18.685-11.693 52.821 13.309 31.693 23.211 33.296 24.202 37.248 23.003 3.216-.976 54-43.048 55.869-46.286 2.018-3.495.943-6.623-14.274-41.553-17.61-40.422-17.127-36.402-6.3-52.483 11.078-16.457 6.975-15.401 49.901-12.83 37.987 2.274 41.547 2.108 43.949-2.052 1.934-3.35 21.892-65.496 22.086-68.772.292-4.921-1.712-6.573-33.436-27.568-37.25-24.653-34.849-21.896-34.54-39.668.306-17.471-1.992-15.176 37.368-37.338 27.668-15.577 32.962-18.908 33.762-21.243.923-2.694-6.727-36.294-14.646-64.318-4.29-15.18-1.18-14.166-45.882-14.968-44.268-.796-41.229.105-49.902-14.796-8.432-14.492-9.266-10.885 11.495-49.788 18.132-33.979 19.169-36.508 16.641-40.578-1.572-2.531-50.186-48.649-52.985-50.265-1.242-.717-3.432-1.2-4.867-1.075zm-94.628 116.878C625.019 293.14 586.48 513.704 418.313 562.843c-139.679 40.814-277.862-71.179-267.76-217.011 11.319-163.41 200.843-252.147 332.915-155.875z",fill:"url(#paint0_linear_2_4)"}),o.createElement("defs",null,o.createElement("linearGradient",{id:"paint0_linear_2_4",x1:638.347,y1:128.07,x2:179.704,y2:672.989,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#8541EF"}),o.createElement("stop",{offset:1,stopColor:"#6EA3EC"}))))}var ir=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ee=new WeakMap,de=new WeakMap,fe={},We=0,Wt=function(e){return e&&(e.host||Wt(e.parentNode))},sr=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Wt(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return Boolean(n)})},lr=function(e,t,n,r){var a=sr(t,Array.isArray(e)?e:[e]);fe[n]||(fe[n]=new WeakMap);var l=fe[n],i=[],c=new Set,m=new Set(a),u=function(h){!h||c.has(h)||(c.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||m.has(h)||Array.prototype.forEach.call(h.children,function(x){if(c.has(x))d(x);else{var v=x.getAttribute(r),I=v!==null&&v!=="false",f=(ee.get(x)||0)+1,p=(l.get(x)||0)+1;ee.set(x,f),l.set(x,p),i.push(x),f===1&&I&&de.set(x,!0),p===1&&x.setAttribute(n,"true"),I||x.setAttribute(r,"true")}})};return d(t),c.clear(),We++,function(){i.forEach(function(h){var x=ee.get(h)-1,v=l.get(h)-1;ee.set(h,x),l.set(h,v),x||(de.has(h)||h.removeAttribute(r),de.delete(h)),v||h.removeAttribute(n)}),We--,We||(ee=new WeakMap,ee=new WeakMap,de=new WeakMap,fe={})}},cr=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=t||ir(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),lr(r,a,n,"aria-hidden")):function(){return null}},ve="right-scroll-bar-position",Ce="width-before-scroll-bar",ur="with-scroll-bars-hidden",dr="--removed-body-scroll-bar-size";function fr(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function mr(e,t){var n=s.exports.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}function pr(e,t){return mr(t||null,function(n){return e.forEach(function(r){return fr(r,n)})})}function gr(e){return e}function hr(e,t){t===void 0&&(t=gr);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(l){var i=t(l,r);return n.push(i),function(){n=n.filter(function(c){return c!==i})}},assignSyncMedium:function(l){for(r=!0;n.length;){var i=n;n=[],i.forEach(l)}n={push:function(c){return l(c)},filter:function(){return n}}},assignMedium:function(l){r=!0;var i=[];if(n.length){var c=n;n=[],c.forEach(l),i=n}var m=function(){var d=i;i=[],d.forEach(l)},u=function(){return Promise.resolve().then(m)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return a}function vr(e){e===void 0&&(e={});var t=hr(null);return t.options=Y({async:!0,ssr:!1},e),t}var _t=function(e){var t=e.sideCar,n=At(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return s.exports.createElement(r,Y({},n))};_t.isSideCarExport=!0;function Cr(e,t){return e.useMedium(t),_t}var Nt=vr(),_e=function(){},Ie=s.exports.forwardRef(function(e,t){var n=s.exports.useRef(null),r=s.exports.useState({onScrollCapture:_e,onWheelCapture:_e,onTouchMoveCapture:_e}),a=r[0],l=r[1],i=e.forwardProps,c=e.children,m=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,x=e.sideCar,v=e.noIsolation,I=e.inert,f=e.allowPinchZoom,p=e.as,w=p===void 0?"div":p,b=At(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),g=x,C=pr([n,t]),y=Y(Y({},b),a);return s.exports.createElement(s.exports.Fragment,null,d&&s.exports.createElement(g,{sideCar:Nt,removeScrollBar:u,shards:h,noIsolation:v,inert:I,setCallbacks:l,allowPinchZoom:!!f,lockRef:n}),i?s.exports.cloneElement(s.exports.Children.only(c),Y(Y({},y),{ref:C})):s.exports.createElement(w,Y({},y,{className:m,ref:C}),c))});Ie.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ie.classNames={fullWidth:Ce,zeroRight:ve};var yr=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function br(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=yr();return t&&e.setAttribute("nonce",t),e}function xr(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ir(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Er=function(){var e=0,t=null;return{add:function(n){e==0&&(t=br())&&(xr(t,n),Ir(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},wr=function(){var e=Er();return function(t,n){s.exports.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Vt=function(){var e=wr(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Ar={left:0,top:0,right:0,gap:0},Ne=function(e){return parseInt(e||"",10)||0},Sr=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Ne(n),Ne(r),Ne(a)]},Fr=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ar;var t=Sr(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},kr=Vt(),Pr=function(e,t,n,r){var a=e.left,l=e.top,i=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(ur,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ve,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Ce,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(ve," .").concat(ve,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ce," .").concat(Ce,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(dr,": ").concat(c,`px;
  }
`)},Mr=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r,l=s.exports.useMemo(function(){return Fr(a)},[a]);return s.exports.createElement(kr,{styles:Pr(l,!t,a,n?"":"!important")})},Ze=!1;if(typeof window<"u")try{var me=Object.defineProperty({},"passive",{get:function(){return Ze=!0,!0}});window.addEventListener("test",me,me),window.removeEventListener("test",me,me)}catch{Ze=!1}var te=Ze?{passive:!1}:!1,Tr=function(e){return e.tagName==="TEXTAREA"},Rt=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Tr(e)&&n[t]==="visible")},Wr=function(e){return Rt(e,"overflowY")},_r=function(e){return Rt(e,"overflowX")},tt=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=Bt(e,n);if(r){var a=Dt(e,n),l=a[1],i=a[2];if(l>i)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Nr=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Vr=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Bt=function(e,t){return e==="v"?Wr(t):_r(t)},Dt=function(e,t){return e==="v"?Nr(t):Vr(t)},Rr=function(e,t){return e==="h"&&t==="rtl"?-1:1},Br=function(e,t,n,r,a){var l=Rr(e,window.getComputedStyle(t).direction),i=l*r,c=n.target,m=t.contains(c),u=!1,d=i>0,h=0,x=0;do{var v=Dt(e,c),I=v[0],f=v[1],p=v[2],w=f-p-l*I;(I||w)&&Bt(e,c)&&(h+=w,x+=I),c=c.parentNode}while(!m&&c!==document.body||m&&(t.contains(c)||t===c));return(d&&(a&&h===0||!a&&i>h)||!d&&(a&&x===0||!a&&-i>x))&&(u=!0),u},pe=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},nt=function(e){return[e.deltaX,e.deltaY]},rt=function(e){return e&&"current"in e?e.current:e},Dr=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Zr=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Or=0,ne=[];function Gr(e){var t=s.exports.useRef([]),n=s.exports.useRef([0,0]),r=s.exports.useRef(),a=s.exports.useState(Or++)[0],l=s.exports.useState(function(){return Vt()})[0],i=s.exports.useRef(e);s.exports.useEffect(function(){i.current=e},[e]),s.exports.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var f=bn([e.lockRef.current],(e.shards||[]).map(rt),!0).filter(Boolean);return f.forEach(function(p){return p.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),f.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var c=s.exports.useCallback(function(f,p){if("touches"in f&&f.touches.length===2)return!i.current.allowPinchZoom;var w=pe(f),b=n.current,g="deltaX"in f?f.deltaX:b[0]-w[0],C="deltaY"in f?f.deltaY:b[1]-w[1],y,A=f.target,S=Math.abs(g)>Math.abs(C)?"h":"v";if("touches"in f&&S==="h"&&A.type==="range")return!1;var E=tt(S,A);if(!E)return!0;if(E?y=S:(y=S==="v"?"h":"v",E=tt(S,A)),!E)return!1;if(!r.current&&"changedTouches"in f&&(g||C)&&(r.current=y),!y)return!0;var k=r.current||y;return Br(k,p,f,k==="h"?g:C,!0)},[]),m=s.exports.useCallback(function(f){var p=f;if(!(!ne.length||ne[ne.length-1]!==l)){var w="deltaY"in p?nt(p):pe(p),b=t.current.filter(function(y){return y.name===p.type&&y.target===p.target&&Dr(y.delta,w)})[0];if(b&&b.should){p.cancelable&&p.preventDefault();return}if(!b){var g=(i.current.shards||[]).map(rt).filter(Boolean).filter(function(y){return y.contains(p.target)}),C=g.length>0?c(p,g[0]):!i.current.noIsolation;C&&p.cancelable&&p.preventDefault()}}},[]),u=s.exports.useCallback(function(f,p,w,b){var g={name:f,delta:p,target:w,should:b};t.current.push(g),setTimeout(function(){t.current=t.current.filter(function(C){return C!==g})},1)},[]),d=s.exports.useCallback(function(f){n.current=pe(f),r.current=void 0},[]),h=s.exports.useCallback(function(f){u(f.type,nt(f),f.target,c(f,e.lockRef.current))},[]),x=s.exports.useCallback(function(f){u(f.type,pe(f),f.target,c(f,e.lockRef.current))},[]);s.exports.useEffect(function(){return ne.push(l),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:x}),document.addEventListener("wheel",m,te),document.addEventListener("touchmove",m,te),document.addEventListener("touchstart",d,te),function(){ne=ne.filter(function(f){return f!==l}),document.removeEventListener("wheel",m,te),document.removeEventListener("touchmove",m,te),document.removeEventListener("touchstart",d,te)}},[]);var v=e.removeScrollBar,I=e.inert;return s.exports.createElement(s.exports.Fragment,null,I?s.exports.createElement(l,{styles:Zr(a)}):null,v?s.exports.createElement(Mr,{gapMode:"margin"}):null)}const Lr=Cr(Nt,Gr);var Zt=s.exports.forwardRef(function(e,t){return s.exports.createElement(Ie,Y({},e,{ref:t,sideCar:Lr}))});Zt.classNames=Ie.classNames;const Yr=Zt,Ot=e=>{const{present:t,children:n}=e,r=function(i){const[c,m]=s.exports.useState(),u=s.exports.useRef({}),d=s.exports.useRef(i),h=s.exports.useRef("none"),x=i?"mounted":"unmounted",[v,I]=function(f,p){return s.exports.useReducer((w,b)=>{const g=p[w][b];return g!=null?g:w},f)}(x,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.exports.useEffect(()=>{const f=ge(u.current);h.current=v==="mounted"?f:"none"},[v]),ye(()=>{const f=u.current,p=d.current;if(p!==i){const w=h.current,b=ge(f);i?I("MOUNT"):b==="none"||(f==null?void 0:f.display)==="none"?I("UNMOUNT"):I(p&&w!==b?"ANIMATION_OUT":"UNMOUNT"),d.current=i}},[i,I]),ye(()=>{if(c){const f=w=>{const b=ge(u.current).includes(w.animationName);w.target===c&&b&&I("ANIMATION_END")},p=w=>{w.target===c&&(h.current=ge(u.current))};return c.addEventListener("animationstart",p),c.addEventListener("animationcancel",f),c.addEventListener("animationend",f),()=>{c.removeEventListener("animationstart",p),c.removeEventListener("animationcancel",f),c.removeEventListener("animationend",f)}}I("ANIMATION_END")},[c,I]),{isPresent:["mounted","unmountSuspended"].includes(v),ref:s.exports.useCallback(f=>{f&&(u.current=getComputedStyle(f)),m(f)},[])}}(t),a=typeof n=="function"?n({present:r.isPresent}):s.exports.Children.only(n),l=q(r.ref,a.ref);return typeof n=="function"||r.isPresent?s.exports.cloneElement(a,{ref:l}):null};function ge(e){return(e==null?void 0:e.animationName)||"none"}Ot.displayName="Presence";let Ve=0;function Xr(){s.exports.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:at()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:at()),Ve++,()=>{Ve===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Ve--}},[])}function at(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const Gt=s.exports.forwardRef((e,t)=>{var n,r;const{containerRef:a,style:l,...i}=e,c=(n=a==null?void 0:a.current)!==null&&n!==void 0?n:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,m]=s.exports.useState({});return ye(()=>{m({})},[]),c?sn.createPortal(s.exports.createElement(K.div,R({"data-radix-portal":""},i,{ref:t,style:c===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...l}:void 0})),c):null}),ot={bubbles:!1,cancelable:!0},zr=s.exports.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:l,...i}=e,[c,m]=s.exports.useState(null),u=se(a),d=se(l),h=s.exports.useRef(null),x=q(t,f=>m(f)),v=s.exports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;s.exports.useEffect(()=>{if(r){let f=function(w){if(v.paused||!c)return;const b=w.target;c.contains(b)?h.current=b:U(h.current,{select:!0})},p=function(w){!v.paused&&c&&(c.contains(w.relatedTarget)||U(h.current,{select:!0}))};return document.addEventListener("focusin",f),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",p)}}},[r,c,v.paused]),s.exports.useEffect(()=>{if(c){lt.add(v);const p=document.activeElement;if(!c.contains(p)){const w=new Event("focusScope.autoFocusOnMount",ot);c.addEventListener("focusScope.autoFocusOnMount",u),c.dispatchEvent(w),w.defaultPrevented||(function(b,{select:g=!1}={}){const C=document.activeElement;for(const y of b)if(U(y,{select:g}),document.activeElement!==C)return}((f=it(c),f.filter(b=>b.tagName!=="A")),{select:!0}),document.activeElement===p&&U(c))}return()=>{c.removeEventListener("focusScope.autoFocusOnMount",u),setTimeout(()=>{const w=new Event("focusScope.autoFocusOnUnmount",ot);c.addEventListener("focusScope.autoFocusOnUnmount",d),c.dispatchEvent(w),w.defaultPrevented||U(p!=null?p:document.body,{select:!0}),c.removeEventListener("focusScope.autoFocusOnUnmount",d),lt.remove(v)},0)}}var f},[c,u,d,v]);const I=s.exports.useCallback(f=>{if(!n&&!r||v.paused)return;const p=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,w=document.activeElement;if(p&&w){const b=f.currentTarget,[g,C]=function(y){const A=it(y),S=st(A,y),E=st(A.reverse(),y);return[S,E]}(b);g&&C?f.shiftKey||w!==C?f.shiftKey&&w===g&&(f.preventDefault(),n&&U(C,{select:!0})):(f.preventDefault(),n&&U(g,{select:!0})):w===b&&f.preventDefault()}},[n,r,v.paused]);return s.exports.createElement(K.div,R({tabIndex:-1},i,{ref:x,onKeyDown:I}))});function it(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function st(e,t){for(const n of e)if(!Hr(n,{upTo:t}))return n}function Hr(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function U(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(r){return r instanceof HTMLInputElement&&"select"in r}(e)&&t&&e.select()}}const lt=function(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=ct(e,t),e.unshift(t)},remove(t){var n;e=ct(e,t),(n=e[0])===null||n===void 0||n.resume()}}}();function ct(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Kr(e){const t=se(e);s.exports.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[t])}let ut,he=0;function jr({disabled:e}){const t=s.exports.useRef(!1);ye(()=>{if(e){let n=function(){he--,he===0&&(document.body.style.pointerEvents=ut)},r=function(a){t.current=a.pointerType!=="mouse"};return he===0&&(ut=document.body.style.pointerEvents),document.body.style.pointerEvents="none",he++,document.addEventListener("pointerup",r),()=>{t.current?document.addEventListener("click",n,{once:!0}):n(),document.removeEventListener("pointerup",r)}}},[e])}const Ur=s.exports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$r=s.exports.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:i,onDismiss:c,...m}=e,u=s.exports.useContext(Ur),[d,h]=s.exports.useState(null),[,x]=s.exports.useState({}),v=q(t,A=>h(A)),I=Array.from(u.layers),[f]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),p=I.indexOf(f),w=d?I.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,g=w>=p,C=function(A){const S=se(A),E=s.exports.useRef(!1);return s.exports.useEffect(()=>{const k=T=>{T.target&&!E.current&&ft("dismissableLayer.pointerDownOutside",S,{originalEvent:T}),E.current=!1},F=window.setTimeout(()=>{document.addEventListener("pointerdown",k)},0);return()=>{window.clearTimeout(F),document.removeEventListener("pointerdown",k)}},[S]),{onPointerDownCapture:()=>E.current=!0}}(A=>{const S=A.target,E=[...u.branches].some(k=>k.contains(S));g&&!E&&(a==null||a(A),i==null||i(A),A.defaultPrevented||c==null||c())}),y=function(A){const S=se(A),E=s.exports.useRef(!1);return s.exports.useEffect(()=>{const k=F=>{F.target&&!E.current&&ft("dismissableLayer.focusOutside",S,{originalEvent:F})};return document.addEventListener("focusin",k),()=>document.removeEventListener("focusin",k)},[S]),{onFocusCapture:()=>E.current=!0,onBlurCapture:()=>E.current=!1}}(A=>{const S=A.target;[...u.branches].some(E=>E.contains(S))||(l==null||l(A),i==null||i(A),A.defaultPrevented||c==null||c())});return Kr(A=>{w===u.layers.size-1&&(r==null||r(A),A.defaultPrevented||c==null||c())}),jr({disabled:n}),s.exports.useEffect(()=>{d&&(n&&u.layersWithOutsidePointerEventsDisabled.add(d),u.layers.add(d),dt())},[d,n,u]),s.exports.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),dt())},[d,u]),s.exports.useEffect(()=>{const A=()=>x({});return document.addEventListener("dismissableLayer.update",A),()=>document.removeEventListener("dismissableLayer.update",A)},[]),s.exports.createElement(K.div,R({},m,{ref:v,style:{pointerEvents:b?g?"auto":"none":void 0,...e.style},onFocusCapture:z(e.onFocusCapture,y.onFocusCapture),onBlurCapture:z(e.onBlurCapture,y.onBlurCapture),onPointerDownCapture:z(e.onPointerDownCapture,C.onPointerDownCapture)}))});function dt(){const e=new Event("dismissableLayer.update");document.dispatchEvent(e)}function ft(e,t,n){const r=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});return t&&r.addEventListener(e,t,{once:!0}),!r.dispatchEvent(a)}const qr=s.exports.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...l}=e;return s.exports.createElement(K.svg,R({},l,{ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?n:s.exports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),Qr=qr;function mt(e){const[t,n]=s.exports.useState(void 0);return s.exports.useEffect(()=>{if(e){const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let i,c;if("borderBoxSize"in l){const m=l.borderBoxSize,u=Array.isArray(m)?m[0]:m;i=u.inlineSize,c=u.blockSize}else{const m=e.getBoundingClientRect();i=m.width,c=m.height}n({width:i,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}n(void 0)},[e]),t}function Jr(e,t){const n=$.get(e);return n===void 0?($.set(e,{rect:{},callbacks:[t]}),$.size===1&&(Oe=requestAnimationFrame(Lt))):(n.callbacks.push(t),t(e.getBoundingClientRect())),()=>{const r=$.get(e);if(r===void 0)return;const a=r.callbacks.indexOf(t);a>-1&&r.callbacks.splice(a,1),r.callbacks.length===0&&($.delete(e),$.size===0&&cancelAnimationFrame(Oe))}}let Oe;const $=new Map;function Lt(){const e=[];$.forEach((t,n)=>{const r=n.getBoundingClientRect();var a,l;a=t.rect,l=r,(a.width!==l.width||a.height!==l.height||a.top!==l.top||a.right!==l.right||a.bottom!==l.bottom||a.left!==l.left)&&(t.rect=r,e.push(t))}),e.forEach(t=>{t.callbacks.forEach(n=>n(t.rect))}),Oe=requestAnimationFrame(Lt)}function ea(e){const[t,n]=s.exports.useState();return s.exports.useEffect(()=>{if(e){const r=Jr(e,n);return()=>{n(void 0),r()}}},[e]),t}function ta({anchorRect:e,popperSize:t,arrowSize:n,arrowOffset:r=0,side:a,sideOffset:l=0,align:i,alignOffset:c=0,shouldAvoidCollisions:m=!0,collisionBoundariesRect:u,collisionTolerance:d=0}){if(!e||!t||!u)return{popperStyles:na,arrowStyles:Re};const h=function(S,E,k=0,F=0,T){const M=T?T.height:0,N=pt(E,S,"x"),W=pt(E,S,"y"),D=W.before-k-M,V=W.after+k+M,Ae=N.before-k-M,Se=N.after+k+M;return{top:{start:{x:N.start+F,y:D},center:{x:N.center,y:D},end:{x:N.end-F,y:D}},right:{start:{x:Se,y:W.start+F},center:{x:Se,y:W.center},end:{x:Se,y:W.end-F}},bottom:{start:{x:N.start+F,y:V},center:{x:N.center,y:V},end:{x:N.end-F,y:V}},left:{start:{x:Ae,y:W.start+F},center:{x:Ae,y:W.center},end:{x:Ae,y:W.end-F}}}}(t,e,l,c,n),x=h[a][i];if(m===!1){const S=gt(x);let E=Re;return n&&(E=vt({popperSize:t,arrowSize:n,arrowOffset:r,side:a,align:i})),{popperStyles:{...S,"--radix-popper-transform-origin":ht(t,a,i,r,n)},arrowStyles:E,placedSide:a,placedAlign:i}}const v=DOMRect.fromRect({...t,...x}),I=(f=u,p=d,DOMRect.fromRect({width:f.width-2*p,height:f.height-2*p,x:f.left+p,y:f.top+p}));var f,p;const w=yt(v,I),b=h[Ct(a)][i],g=function(S,E,k){const F=Ct(S);return E[S]&&!k[F]?F:S}(a,w,yt(DOMRect.fromRect({...t,...b}),I)),C=function(S,E,k,F,T){const M=k==="top"||k==="bottom",N=M?"left":"top",W=M?"right":"bottom",D=M?"width":"height",V=E[D]>S[D];return(F==="start"||F==="center")&&(T[N]&&V||T[W]&&!V)?"end":(F==="end"||F==="center")&&(T[W]&&V||T[N]&&!V)?"start":F}(t,e,a,i,w),y=gt(h[g][C]);let A=Re;return n&&(A=vt({popperSize:t,arrowSize:n,arrowOffset:r,side:g,align:C})),{popperStyles:{...y,"--radix-popper-transform-origin":ht(t,g,C,r,n)},arrowStyles:A,placedSide:g,placedAlign:C}}function pt(e,t,n){const r=e[n==="x"?"left":"top"],a=n==="x"?"width":"height",l=e[a],i=t[a];return{before:r-i,start:r,center:r+(l-i)/2,end:r+l-i,after:r+l}}function gt(e){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(e.x+window.scrollX)}px, ${Math.round(e.y+window.scrollY)}px, 0)`}}function ht(e,t,n,r,a){const l=t==="top"||t==="bottom",i=a?a.width:0,c=a?a.height:0,m=i/2+r;let u="",d="";return l?(u={start:`${m}px`,center:"center",end:e.width-m+"px"}[n],d=t==="top"?`${e.height+c}px`:-c+"px"):(u=t==="left"?`${e.width+c}px`:-c+"px",d={start:`${m}px`,center:"center",end:e.height-m+"px"}[n]),`${u} ${d}`}const na={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},Re={position:"absolute",opacity:0};function vt({popperSize:e,arrowSize:t,arrowOffset:n,side:r,align:a}){const l=(e.width-t.width)/2,i=(e.height-t.width)/2,c={top:0,right:90,bottom:180,left:-90}[r],m=Math.max(t.width,t.height),u={width:`${m}px`,height:`${m}px`,transform:`rotate(${c}deg)`,willChange:"transform",position:"absolute",[r]:"100%",direction:ra(r,a)};return r!=="top"&&r!=="bottom"||(a==="start"&&(u.left=`${n}px`),a==="center"&&(u.left=`${l}px`),a==="end"&&(u.right=`${n}px`)),r!=="left"&&r!=="right"||(a==="start"&&(u.top=`${n}px`),a==="center"&&(u.top=`${i}px`),a==="end"&&(u.bottom=`${n}px`)),u}function ra(e,t){return(e!=="top"&&e!=="right"||t!=="end")&&(e!=="bottom"&&e!=="left"||t==="end")?"ltr":"rtl"}function Ct(e){return{top:"bottom",right:"left",bottom:"top",left:"right"}[e]}function yt(e,t){return{top:e.top<t.top,right:e.right>t.right,bottom:e.bottom>t.bottom,left:e.left<t.left}}const[Yt,Xt]=St("Popper"),[aa,zt]=Yt("Popper"),oa=e=>{const{__scopePopper:t,children:n}=e,[r,a]=s.exports.useState(null);return s.exports.createElement(aa,{scope:t,anchor:r,onAnchorChange:a},n)},ia=s.exports.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,l=zt("PopperAnchor",n),i=s.exports.useRef(null),c=q(t,i);return s.exports.useEffect(()=>{l.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:s.exports.createElement(K.div,R({},a,{ref:c}))}),[sa,la]=Yt("PopperContent"),ca=s.exports.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:a,align:l="center",alignOffset:i,collisionTolerance:c,avoidCollisions:m=!0,...u}=e,d=zt("PopperContent",n),[h,x]=s.exports.useState(),v=ea(d.anchor),[I,f]=s.exports.useState(null),p=mt(I),[w,b]=s.exports.useState(null),g=mt(w),C=q(t,M=>f(M)),y=function(){const[M,N]=s.exports.useState(void 0);return s.exports.useEffect(()=>{let W;function D(){N({width:window.innerWidth,height:window.innerHeight})}function V(){window.clearTimeout(W),W=window.setTimeout(D,100)}return D(),window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]),M}(),A=y?DOMRect.fromRect({...y,x:0,y:0}):void 0,{popperStyles:S,arrowStyles:E,placedSide:k,placedAlign:F}=ta({anchorRect:v,popperSize:p,arrowSize:g,arrowOffset:h,side:r,sideOffset:a,align:l,alignOffset:i,shouldAvoidCollisions:m,collisionBoundariesRect:A,collisionTolerance:c}),T=k!==void 0;return s.exports.createElement("div",{style:S,"data-radix-popper-content-wrapper":""},s.exports.createElement(sa,{scope:n,arrowStyles:E,onArrowChange:b,onArrowOffsetChange:x},s.exports.createElement(K.div,R({"data-side":k,"data-align":F},u,{style:{...u.style,animation:T?void 0:"none"},ref:C}))))}),ua=s.exports.forwardRef(function(e,t){const{__scopePopper:n,offset:r,...a}=e,l=la("PopperArrow",n),{onArrowOffsetChange:i}=l;return s.exports.useEffect(()=>i(r),[i,r]),s.exports.createElement("span",{style:{...l.arrowStyles,pointerEvents:"none"}},s.exports.createElement("span",{ref:l.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},s.exports.createElement(Qr,R({},a,{ref:t,style:{...a.style,display:"block"}}))))}),da=oa,fa=ia,ma=ca,pa=ua,[ga,po]=St("Popover",[Xt]),Ee=Xt(),[ha,ae]=ga("Popover"),va=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:l,modal:i=!1}=e,c=Ee(t),m=s.exports.useRef(null),[u,d]=s.exports.useState(!1),[h=!1,x]=xn({prop:r,defaultProp:a,onChange:l});return s.exports.createElement(da,c,s.exports.createElement(ha,{scope:t,contentId:In(),triggerRef:m,open:h,onOpenChange:x,onOpenToggle:s.exports.useCallback(()=>x(v=>!v),[x]),hasCustomAnchor:u,onCustomAnchorAdd:s.exports.useCallback(()=>d(!0),[]),onCustomAnchorRemove:s.exports.useCallback(()=>d(!1),[]),modal:i},n))},Ca=s.exports.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=ae("PopoverTrigger",n),l=Ee(n),i=q(t,a.triggerRef),c=s.exports.createElement(K.button,R({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Kt(a.open)},r,{ref:i,onClick:z(e.onClick,a.onOpenToggle)}));return a.hasCustomAnchor?c:s.exports.createElement(fa,R({asChild:!0},l),c)}),ya=s.exports.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=ae("PopoverContent",e.__scopePopover);return s.exports.createElement(Ot,{present:n||a.open},a.modal?s.exports.createElement(ba,R({},r,{ref:t})):s.exports.createElement(xa,R({},r,{ref:t})))}),ba=s.exports.forwardRef((e,t)=>{const{allowPinchZoom:n,portalled:r=!0,...a}=e,l=ae("PopoverContent",e.__scopePopover),i=s.exports.useRef(null),c=q(t,i),m=s.exports.useRef(!1);s.exports.useEffect(()=>{const d=i.current;if(d)return cr(d)},[]);const u=r?Gt:s.exports.Fragment;return s.exports.createElement(u,null,s.exports.createElement(Yr,{allowPinchZoom:n},s.exports.createElement(Ht,R({},a,{ref:c,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:z(e.onCloseAutoFocus,d=>{var h;d.preventDefault(),m.current||(h=l.triggerRef.current)===null||h===void 0||h.focus()}),onPointerDownOutside:z(e.onPointerDownOutside,d=>{const h=d.detail.originalEvent,x=h.button===0&&h.ctrlKey===!0,v=h.button===2||x;m.current=v},{checkForDefaultPrevented:!1}),onFocusOutside:z(e.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})}))))}),xa=s.exports.forwardRef((e,t)=>{const{portalled:n=!0,...r}=e,a=ae("PopoverContent",e.__scopePopover),l=s.exports.useRef(!1),i=n?Gt:s.exports.Fragment;return s.exports.createElement(i,null,s.exports.createElement(Ht,R({},r,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var m,u;(m=e.onCloseAutoFocus)===null||m===void 0||m.call(e,c),c.defaultPrevented||(l.current||(u=a.triggerRef.current)===null||u===void 0||u.focus(),c.preventDefault()),l.current=!1},onInteractOutside:c=>{var m,u;(m=e.onInteractOutside)===null||m===void 0||m.call(e,c),c.defaultPrevented||(l.current=!0);const d=c.target;!((u=a.triggerRef.current)===null||u===void 0)&&u.contains(d)&&c.preventDefault()}})))}),Ht=s.exports.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:m,onFocusOutside:u,onInteractOutside:d,...h}=e,x=ae("PopoverContent",n),v=Ee(n);return Xr(),s.exports.createElement(zr,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:l},s.exports.createElement($r,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:c,onPointerDownOutside:m,onFocusOutside:u,onDismiss:()=>x.onOpenChange(!1)},s.exports.createElement(ma,R({"data-state":Kt(x.open),role:"dialog",id:x.contentId},v,h,{ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)"}}))))}),Ia=s.exports.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=ae("PopoverClose",n);return s.exports.createElement(K.button,R({type:"button"},r,{ref:t,onClick:z(e.onClick,()=>a.onOpenChange(!1))}))}),Ea=s.exports.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Ee(n);return s.exports.createElement(pa,R({},a,r,{ref:t}))});function Kt(e){return e?"open":"closed"}const jt=va,Ut=Ca,$t=ya,qt=Ia,Qt=Ea,wa=j({"0%":{opacity:0,transform:"translateY(2px)"},"100%":{opacity:1,transform:"translateY(0)"}}),Aa=j({"0%":{opacity:0,transform:"translateX(-2px)"},"100%":{opacity:1,transform:"translateX(0)"}}),Sa=j({"0%":{opacity:0,transform:"translateY(-2px)"},"100%":{opacity:1,transform:"translateY(0)"}}),Fa=j({"0%":{opacity:0,transform:"translateX(2px)"},"100%":{opacity:1,transform:"translateX(0)"}}),ka=re($t,{borderRadius:4,padding:20,width:260,boxShadow:"hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px","@media (prefers-reduced-motion: no-preference)":{animationDuration:"400ms",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",animationFillMode:"forwards",willChange:"transform, opacity",'&[data-state="open"]':{'&[data-side="top"]':{animationName:Sa},'&[data-side="right"]':{animationName:Fa},'&[data-side="bottom"]':{animationName:wa},'&[data-side="left"]':{animationName:Aa}}},variants:{theme:{dark:{backgroundColor:"#1a1a1a",color:"#FFFFFF"},light:{backgroundColor:"#FFFFFF",color:"#1a1a1a"},whatsapp:{background:"var(--background-default)",color:"var(--primary)"}}}}),Pa=re(Qt,{variants:{theme:{dark:{fill:"#1a1a1a"},light:{fill:"#FFFFFF"},whatsapp:{fill:"var(--background-default)"}}}}),Ma=re(qt,{all:"unset",fontFamily:"inherit",borderRadius:"100%",height:25,width:25,display:"inline-flex",alignItems:"center",justifyContent:"center",position:"absolute",border:"1px solid red",top:5,right:5,"&:hover":{backgroundColor:B(.85,"red")}}),Ta=jt,Wa=Ut,_a=ka,Na=Pa,Va=Ma;function Ra({children:e,trigger:t,triggerAsChild:n,theme:r,side:a}){return o.createElement(Ta,null,o.createElement(Wa,{asChild:!!n},t),o.createElement(_a,{side:a,sideOffset:5,theme:r},e,o.createElement(Na,{theme:r}),o.createElement(Va,{"aria-label":"Close"},o.createElement(It,{fill:"red"}))))}function $e(e){return P.Chat.getModelsArray().find(n=>n.id.toString()===e)}function Ba({isOpen:e,onRequestClose:t}){function n(){return we.getFunnels().filter(h=>h.status==="running")}const[r,a]=s.exports.useState(n());s.exports.useEffect(()=>{setTimeout(()=>{a(n())},1e3)},[r]);const[l,i]=s.exports.useState(!1),c={details:{title:"Carregando...",okTitle:"Carregando...",cancelTitle:"Carregando...",fillCancel:"grey",fillOk:Z.red},onRequestOk:async()=>{console.log("Default onRequestOk Cancel Funnel")},isOpen:!1,onRequestClose:()=>{i(!1)}},[m,u]=s.exports.useState(c);return o.createElement(Et,{closeTimeoutMS:400,isOpen:e,onRequestClose:()=>{t()},overlayClassName:"react-modal-overlay",className:"react-modal-content relative h-full"},o.createElement("button",{type:"button",onClick:()=>{t()},className:"react-modal-close"},o.createElement(ln,{fill:Z.red})),o.createElement("h2",{className:"text-xl font-bold text-center"},r.length>0&&r.length," ",r.length===1?"Funil":"Funis"," em andamento"),o.createElement("div",{className:"w-full h-full  relative overflow-y-scroll"},o.createElement("div",{className:"absolute top-0 py-4 flex flex-col items-center w-full"},r.length===0&&o.createElement("span",null,"Nenhum funil est\xE1 sendo enviado no momento."),r.map(d=>{var w,b,g,C,y,A;const h=d.current?wt((w=d.current)==null?void 0:w.type):cn,x=P.ProfilePicThumb.getModelsArray().find(S=>S.id._serialized===d.targetId),v=$e(d.targetId),I=((b=d==null?void 0:d.current)==null?void 0:b.expectDeliveryTimestamp)&&((g=d==null?void 0:d.current)==null?void 0:g.expectDeliveryTimestamp)-Date.now(),f=I&&Math.floor(I/1e3/60),p=I&&Math.floor(I/1e3%60);return o.createElement("div",{key:d.generatedId,className:"flex items-center justify-between bg-[var(--panel-header-background)] p-4 rounded-lg my-1 w-full"},o.createElement("div",null,o.createElement("div",{className:"flex items-center justify-start"},o.createElement("div",{className:"w-12 h-12 p-1 grid place-items-center"},x!=null&&x.img?o.createElement("img",{src:x.img,alt:"Foto do contato",className:" w-full h-full rounded-full"}):o.createElement(xt,{className:"fill-[var(--avatar-placeholder-primary)] bg-[var(--avatar-placeholder-background)] w-full h-full  rounded-full"})),o.createElement("span",null,v==null?void 0:v.formattedTitle,((C=v==null?void 0:v.contact)==null?void 0:C.isAddressBookContact)===0&&((y=v==null?void 0:v.contact)==null?void 0:y.notifyName)&&` ( ${(A=v==null?void 0:v.contact)==null?void 0:A.notifyName} )`)),o.createElement("div",{className:"flex items-center justify-start"},o.createElement("div",{className:"w-12 h-12 p-1 grid place-items-center"},o.createElement(le,{className:"fill-zap-gold w-3/4 h-3/4"})),o.createElement("span",null,d.funnel.name))),o.createElement("div",{className:"text-left"},!!d.current&&o.createElement(o.Fragment,null,o.createElement("div",{className:"flex items-center justify-between"},o.createElement("span",null,"Atual:"),o.createElement(h,null),o.createElement("span",null,"(",d.current.queuePosition,"/",d.current.queueLength,")")),o.createElement("div",null,"Ser\xE1 enviado em"),o.createElement("div",{className:"text-center"},f,"min e ",p,"seg")),o.createElement("button",{onClick:()=>{u({...m,details:{...m.details,title:`Tem certeza que deseja cancelar o funil no chat: ${v.formattedTitle}?`,description:"Voc\xEA poder\xE1 reenviar o funil a partir de um item clicando na \u{1F50E} lupa do funil dentro da extens\xE3o",cancelTitle:"Cancelar",okTitle:"Cancelar Funil"},onRequestOk:async()=>{i(!1),d.stopFunction()}}),i(!0)},className:"bg-zap-red p-2 rounded-lg mt-2 hover:opacity-80"},"Cancelar Funil")))}),o.createElement(Xe,{...m,isOpen:l}))))}function Da(){const[e,t]=s.exports.useState(!1);function n(){t(!0)}function r(){t(!1)}const{shouldAskToSendShortcuts:a,shouldHideShortcuts:l,shouldHideCurrentFunnelPopover:i,toggleShouldAskToSendShortcuts:c,toggleShouldHideShortcuts:m,toggleShouldHideCurrentFunnelPopover:u}=Ue();return o.createElement("div",{style:{marginLeft:"10px"}},o.createElement(Ra,{theme:"whatsapp",side:"bottom",trigger:o.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},o.createElement("div",{style:{width:"1.25rem",height:"1.25rem"}},o.createElement(or,{style:{width:"100%",height:"100%"}})))},o.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",height:"100%",marginTop:"1rem"}},o.createElement("h1",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"}},"Personaliza\xE7\xE3o ZapVoice"),o.createElement("div",{className:"grid grid-cols-[1fr_auto] items-center w-full bg-[var(--panel-header-background)] p-1 mb-1 rounded"},o.createElement("span",null,"Ocultar atalhos"),o.createElement(Fe,{zvTheme:"dark",checked:!!l,onChange:m,className:"ml-2"})),o.createElement("div",{className:"grid grid-cols-[1fr_auto] items-center w-full bg-[var(--panel-header-background)] p-1 mb-1 rounded"},o.createElement("span",null,"Perguntar ao enviar itens \xFAnicos"),o.createElement(Fe,{zvTheme:"dark",checked:!!a,onChange:c,className:"ml-2"})),o.createElement("div",{className:"grid grid-cols-[1fr_auto] items-center w-full bg-[var(--panel-header-background)] p-1 mb-1 rounded"},o.createElement("span",null,"Ocultar indicador do funil atual"),o.createElement(Fe,{zvTheme:"dark",checked:!!i,onChange:u,className:"ml-2"})),o.createElement("div",null,o.createElement("button",{type:"button",onClick:()=>{n()},className:"bg-zap-gold p-2 mt-2 text-white font-bold rounded flex items-center justify-center "},o.createElement("div",{className:"w-10 rounded-full grid place-items-center"},o.createElement(le,{className:"text-white h-full w-full"})),"Status dos funis em andamento"),o.createElement(Ba,{isOpen:e,onRequestClose:r})))))}async function Za(){return new Promise((e,t)=>{chrome.runtime.sendMessage(O,{type:"getFlags",data:{}},async({type:n,response:r})=>n==="getFlags"&&e(r))})}const Jt=s.exports.createContext({});function Oa({children:e}){const{isPremium:t,keyData:n}=je(),[r,a]=s.exports.useState({});function l(){Za().then(i=>{i&&a(i)})}return s.exports.useEffect(()=>{l()},[t,n]),o.createElement(Jt.Provider,{value:{flags:r,refreshFlags:l}},e)}function en(){return s.exports.useContext(Jt)}function Ga({currentActionIndexes:e,setFunnelPopUp:t,reloadCurrentActionIndexes:n}){var I,f,p,w,b;const{refreshFlags:r}=en(),{shouldAskToSendShortcuts:a}=Ue(),{isPremium:l,keyData:i,refreshPremium:c}=je(),[m,u]=s.exports.useState(!1);function d(g){u(g!=null?g:!m)}const h={details:{title:"Carregando...",okTitle:"Carregando...",cancelTitle:"Carregando...",fillCancel:"grey",fillOk:Z.green},onRequestOk:async()=>{console.log("Default onRequestOk SimpleModal")},isOpen:!1,onRequestClose:()=>{d(!1)}},[x,v]=s.exports.useState(h);return o.createElement(o.Fragment,null,o.createElement("div",{id:"actionsContainerZV",style:{display:"flex",alignItems:"center",overflowX:"auto",WebkitOverflowScrolling:"touch",whiteSpace:"nowrap"},onWheel:g=>{const{deltaY:C}=g,y=document.getElementById("actionsContainerZV");y==null||y.scrollTo({top:0,left:y.scrollLeft+C,behavior:"smooth"})}},o.createElement(Xe,{...x,isOpen:m}),((I=e.funis.filter(g=>g==null?void 0:g.data))==null?void 0:I.length)>0&&e.funis.map(g=>g.data&&g.data.length>0&&o.createElement("div",{className:"btnSendContainerZV funnelContainer",style:{flex:"none"},key:g.id},o.createElement("button",{type:"button",className:"btnSendItemZV funnelBtn",style:{background:B(.5,Z.gold),color:"var(--primary)",fontWeight:"500",padding:"0.25rem",borderRadius:"0.5rem",margin:"0.25rem",display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:()=>{if(!l)_.error(`${i} => Funis n\xE3o liberados, considere assinar a vers\xE3o PREMIUM`,{theme:"colored",autoClose:3e3}),c();else{if(!g.data||g.data.length===0)return;t(g)}}},o.createElement("div",{style:{width:"1rem",height:"1rem",marginRight:"0.25rem",display:"grid",placeItems:"center"}},o.createElement(le,null)),g.name))),((f=e.audiosIndex)==null?void 0:f.length)>0&&e.audiosIndex.map((g,C)=>o.createElement("div",{className:"btnSendContainerZV audioContainer",style:{flex:"none"},key:g==null?void 0:g.id},o.createElement("button",{type:"button",className:"btnSendItemZV audioBtn",style:{background:B(.5,Z.blue),color:"var(--primary)",fontWeight:"500",padding:"0.25rem",borderRadius:"0.5rem",margin:"0.25rem",display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:()=>{const y=X();if(!y){_.error("Nenhum chat aberto, envio cancelado");return}a?(v({...x,details:{...x.details,title:`Enviar \xE1udio para ${y.formattedTitle}?`,description:`Item => ${g.name}`,cancelTitle:"Cancelar",okTitle:"Enviar \xC1udio"},onRequestOk:async()=>{d(!1),G.add({itemId:g.id,chatId:y.id.toString()})}}),d(!0)):G.add({itemId:g.id,chatId:y.id.toString()})}},o.createElement("div",{style:{width:"1rem",height:"1rem",marginRight:"0.25rem",display:"grid",placeItems:"center"}},o.createElement(un,null)),g.name))),((p=e.mensagensIndex)==null?void 0:p.length)>0&&e.mensagensIndex.map((g,C)=>o.createElement("div",{className:"btnSendContainerZV messageContainer",style:{flex:"none"},key:g==null?void 0:g.id},o.createElement("button",{type:"button",className:"btnSendItemZV messageBtn",style:{background:B(.5,Z.purple),color:"var(--primary)",fontWeight:"500",padding:"0.25rem",borderRadius:"0.5rem",margin:"0.25rem",display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:()=>{const y=X();if(!y){_.error("Nenhum chat aberto, envio cancelado");return}a?(v({...x,details:{...x.details,title:`Enviar mensagem para ${y.formattedTitle}?`,description:`Item => ${g.name}`,cancelTitle:"Cancelar",okTitle:"Enviar Mensagem"},onRequestOk:async()=>{d(!1),G.add({itemId:g.id,chatId:y.id.toString()})}}),d(!0)):G.add({itemId:g.id,chatId:y.id.toString()})}},o.createElement("div",{style:{width:"1rem",height:"1rem",marginRight:"0.25rem",display:"grid",placeItems:"center"}},o.createElement(dn,null)),g.name))),((w=e.mediasIndex)==null?void 0:w.length)>0&&e.mediasIndex.map((g,C)=>o.createElement("div",{className:"btnSendContainerZV mediaContainer",style:{flex:"none"},key:g==null?void 0:g.id},o.createElement("button",{type:"button",className:"btnSendItemZV mediaBtn",style:{background:B(.5,Z.green),color:"var(--primary)",fontWeight:"500",padding:"0.25rem",borderRadius:"0.5rem",margin:"0.25rem",display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:()=>{const y=X();if(!y){_.error("Nenhum chat aberto, envio cancelado");return}a?(v({...x,details:{...x.details,title:`Enviar m\xEDdia para ${y.formattedTitle}?`,description:`Item => ${g.name}`,cancelTitle:"Cancelar",okTitle:"Enviar M\xEDdia"},onRequestOk:async()=>{d(!1),G.add({itemId:g.id,chatId:y.id.toString()})}}),d(!0)):G.add({itemId:g.id,chatId:y.id.toString()})}},o.createElement("div",{style:{width:"1rem",height:"1rem",marginRight:"0.25rem",display:"grid",placeItems:"center"}},o.createElement(fn,null)),g.name))),((b=e.docsIndex)==null?void 0:b.length)>0&&e.docsIndex.map((g,C)=>o.createElement("div",{className:"btnSendContainerZV docContainer",style:{flex:"none"},key:g==null?void 0:g.id},o.createElement("button",{type:"button",className:"btnSendItemZV docBtn",style:{background:B(.5,Z.veryperi),color:"var(--primary)",fontWeight:"500",padding:"0.25rem",borderRadius:"0.5rem",margin:"0.25rem",display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:()=>{const y=X();if(!y){_.error("Nenhum chat aberto, envio cancelado");return}a?(v({...x,details:{...x.details,title:`Enviar documento para ${y.formattedTitle}?`,description:`Item => ${g.name}`,cancelTitle:"Cancelar",okTitle:"Enviar Documento"},onRequestOk:async()=>{d(!1),G.add({itemId:g.id,chatId:y.id.toString()})}}),d(!0)):G.add({itemId:g.id,chatId:y.id.toString()})}},o.createElement("div",{style:{width:"1rem",height:"1rem",marginRight:"0.25rem",display:"grid",placeItems:"center"}},o.createElement(mn,null)),g.name)))),o.createElement("button",{type:"button",onClick:()=>{n(),r()},style:{marginLeft:"15px",padding:"5px 10px",background:Z.green,borderRadius:"0.5rem"}},o.createElement(pn,{fill:"white",style:{width:"1rem",height:"1rem"}})))}const Be=({children:e,container:t,key:n})=>gn.exports.createPortal(e,t,n),La=j({"0%":{opacity:0,transform:"translateY(2px)"},"100%":{opacity:1,transform:"translateY(0)"}}),Ya=j({"0%":{opacity:0,transform:"translateX(-2px)"},"100%":{opacity:1,transform:"translateX(0)"}}),Xa=j({"0%":{opacity:0,transform:"translateY(-2px)"},"100%":{opacity:1,transform:"translateY(0)"}}),za=j({"0%":{opacity:0,transform:"translateX(2px)"},"100%":{opacity:1,transform:"translateX(0)"}}),Ha=re($t,{borderRadius:4,padding:20,width:260,boxShadow:"hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px","@media (prefers-reduced-motion: no-preference)":{animationDuration:"400ms",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",animationFillMode:"forwards",willChange:"transform, opacity",'&[data-state="open"]':{'&[data-side="top"]':{animationName:Xa},'&[data-side="right"]':{animationName:za},'&[data-side="bottom"]':{animationName:La},'&[data-side="left"]':{animationName:Ya}}},variants:{theme:{dark:{backgroundColor:"#1a1a1a",color:"#FFFFFF"},light:{backgroundColor:"#FFFFFF",color:"#1a1a1a"},whatsapp:{background:"var(--background-default)",color:"var(--primary)"}}}}),Ka=re(Qt,{variants:{theme:{dark:{fill:"#1a1a1a"},light:{fill:"#FFFFFF"},whatsapp:{fill:"var(--background-default)"}}}}),ja=re(qt,{all:"unset",fontFamily:"inherit",borderRadius:"100%",height:25,width:25,display:"inline-flex",alignItems:"center",justifyContent:"center",position:"absolute",border:"1px solid red",top:5,right:5,"&:hover":{backgroundColor:B(.85,"red")}}),Ua=jt,$a=Ut,qa=Ha,Qa=Ka,Ja=ja;function eo({children:e,trigger:t,isOpen:n,setIsOpen:r,triggerAsChild:a,theme:l,side:i}){return o.createElement(Ua,{open:n,onOpenChange:c=>{r(c)}},o.createElement($a,{asChild:!!a},t),o.createElement(qa,{side:i,sideOffset:5,theme:l},e,o.createElement(Qa,{theme:l}),o.createElement(Ja,{"aria-label":"Close"},o.createElement(It,{fill:"red"}))))}function xe(e){if(!e){const n=X();if(!n)return;e=n.id.toString()}const t=we.getFunnels();return t==null?void 0:t.find(n=>n.targetId===e&&n.status==="running")}function to({foundFunnel:e,reloadFoundFunnel:t,chatId:n}){var u,d,h;const r=(u=e==null?void 0:e.current)!=null&&u.expectDeliveryTimestamp?((d=e==null?void 0:e.current)==null?void 0:d.expectDeliveryTimestamp)-Date.now():0,[a,l]=s.exports.useState(r),i=(h=e==null?void 0:e.current)==null?void 0:h.expectDeliveryTimestamp,c=Math.floor(a/1e3/60),m=Math.floor(a/1e3%60);return s.exports.useEffect(()=>{setTimeout(()=>{const x=xe(n);if((e==null?void 0:e.current)!==(x==null?void 0:x.current)&&t(),!Number.isNaN(i)&&i!==void 0){const v=i-Date.now();if(v<=0){t();return}l(v)}else l(0)},1e3)},[a,e]),o.createElement("div",{className:"flex flex-col text-center"},o.createElement("span",null,"Sera enviado em"),o.createElement("span",null,String(c).padStart(2,"0"),"min e"," ",String(m).padStart(2,"0"),"seg"))}function no({chatId:e,setCurrentFunnel:t}){var p;const[n,r]=s.exports.useState(xe(e));function a(){const w=xe(e);r(w)}const[l,i]=s.exports.useState(!1),[c,m]=s.exports.useState(!1),u=$e(e),d={details:{title:"Carregando...",okTitle:"Carregando...",cancelTitle:"Carregando...",fillCancel:"grey",fillOk:Z.red},onRequestOk:async()=>{console.log("Default onRequestOk Cancel Funnel")},isOpen:!1,onRequestClose:()=>{m(!1)}},[h,x]=s.exports.useState(d);s.exports.useEffect(()=>{n||(i(!1),t(void 0))},[n==null?void 0:n.current]);const v=hn`
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
`,I=bt.div`
    width: 100%;
    height: 100%;
    background-image: conic-gradient(transparent, #08a6da47, #08a6da);
    border-radius: 50%;
    position: absolute;
    z-index: -2;
    animation: ${v} 2s linear infinite;
  `,f=!!(n!=null&&n.current)&&wt(n.current.type);return o.createElement(eo,{theme:"whatsapp",side:"bottom",isOpen:l,setIsOpen:i,triggerAsChild:!0,trigger:o.createElement("div",{style:{display:"grid",placeItems:"center",filter:"opacity(0.5)",width:"4rem",height:"4rem",position:"absolute",top:"4.5rem",left:"1rem",zIndex:"999999999"}},o.createElement("button",{type:"button",id:"currentFunnelButton",style:{border:"none",width:"90%",height:"90%",background:Z.gold,borderRadius:"50%"}},o.createElement(le,{fill:"white",style:{width:"50%",height:"50%",margin:"0 auto"}})),o.createElement(I,null))},o.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"}},o.createElement("h2",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1rem"}},"Funil Atual"),o.createElement("span",{style:{fontSize:"1rem",fontWeight:"bold",marginBottom:"1rem"},className:"underline text-base font-bold mt-2"},(p=n==null?void 0:n.funnel)==null?void 0:p.name),(n==null?void 0:n.current)&&o.createElement(o.Fragment,null,o.createElement("span",null,"---------------"),o.createElement("span",null,"Pr\xF3ximo item"),o.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},f&&o.createElement(f,null),o.createElement("span",null,"(",n.current.queuePosition,"/",n.current.queueLength,")")),o.createElement(to,{foundFunnel:n,reloadFoundFunnel:a,chatId:e})),o.createElement(Xe,{...h,isOpen:c}),o.createElement("button",{className:"border-none p-2 rounded text-base font-bold text-white bg-zap-red mt-4",type:"button",onClick:()=>{x({...h,details:{...h.details,title:`Tem certeza que deseja cancelar o funil no chat: ${u.formattedTitle}?`,description:"Voc\xEA poder\xE1 reenviar o funil a partir de um item clicando na \u{1F50E} lupa do funil dentro da extens\xE3o",cancelTitle:"Cancelar",okTitle:"Cancelar Funil"},onRequestOk:async()=>{m(!1),n==null||n.stopFunction(),i(!1),t(void 0)}}),m(!0)}},"CANCELAR FUNIL")))}async function ro(e,t,n){return new Promise(r=>{const a=Ye();let l=!1;function i(){l=!0,r(!0),window.removeEventListener(a,i)}window.addEventListener(a,i),setTimeout(()=>{l||i()},1e4),window.dispatchEvent(new CustomEvent("ZVEventPTC",{detail:{type:"sendFunnel",funnelId:e,chatTargetId:t,promiseId:a,secondsBeforeSend:n}}))})}async function ao(e,t,n,r){return new Promise(a=>{var u;const l=Ye(),i=t||X();let c=!1;function m(){c=!0,a(!0),window.removeEventListener(l,m)}window.addEventListener(l,m),setTimeout(()=>{c||m()},1e4),window.dispatchEvent(new CustomEvent("ZVEventPTC",{detail:{type:"sendItem",itemId:e,chatTargetId:(u=i==null?void 0:i.id)==null?void 0:u.toString(),promiseId:l,avoidToast:n,premium:r}}))})}function oo(){const e=[];function t(r){e.push(r)}async function n(){if(e.length>0){const r=e.shift();if(r){const a=await He(r.chatId);a?await ao(r.itemId,a,r.avoidToast,r.premiumDrilling):_.error(`N\xE3o foi poss\xEDvel enviar o item para o chat ${r.chatId}`)}}setTimeout(n,100)}return n(),{queue:e,add:t}}const G=oo();function io({funnel:e,chat:t,changeFunnelStatus:n,generatedId:r,delayAtStart:a}){const l=e.data||[];let i=!1;function c(){P.ChatPresence.markPaused(t),i=!0,n(r,"stopped",void 0),_.info(`Funil ${e.name} Interrompido no chat ${t.formattedTitle}`)}function m(u){async function d(){t.presence.subscribe(),P.ChatPresence.sendPresenceAvailable(),P.ChatPresence.markPaused(t),i||(u.type==="mensagens"||u.type==="audios")&&(u.type==="mensagens"?await P.ChatPresence.markComposing(t):u.type==="audios"&&await P.ChatPresence.markRecording(t))}d();const h=u.type==="mensagens"?500:5e3;return setInterval(d,ke(h,h+1e3))}return new Promise(async u=>{for(const[d,h]of l.entries()){if(i){P.ChatPresence.markPaused(t);break}const{delay:x,id:v}=h,I=x>0?ke(x,x+1500):ke(500,1300);if(setTimeout(()=>{n(r,"running",{expectDeliveryTimestamp:Date.now()+I+(d===0&&a||0),type:h.type,queuePosition:d+1,queueLength:l.length})},1e3),d===0&&a&&a>0&&(await Qe(a),i)){P.ChatPresence.markPaused(t);break}const f=m(h);await Qe(I),i||G.add({itemId:v,chatId:t.id.toString(),avoidToast:!0,premiumDrilling:!0}),clearInterval(f),P.ChatPresence.markPaused(t)}P.ChatPresence.markPaused(t),!i&&n(r,"done",void 0),u(!0)}),{funnelId:e.id,stopFunction:c}}function so(){const e=[];function t(a,l,i){const c=e.find(u=>u.generatedId===a&&(u.status==="queued"||u.status==="running")),m=c&&e.indexOf(c);c&&typeof m<"u"&&!Number.isNaN(m)&&m>-1&&e.splice(m,1,{...c,status:l,current:i})}async function n(a,l,i){const c=Ye(),m=e.find(h=>h.targetId===l&&h.status==="running"),u=await He(l);if(m){_.info(`Um funil j\xE1 est\xE1 sendo disparado para ${u==null?void 0:u.formattedTitle}, cancelando...`);return}const{stopFunction:d}=io({funnel:a,chat:u,changeFunnelStatus:t,generatedId:c,delayAtStart:i});e.push({generatedId:c,funnel:a,targetId:u.id.toString(),stopFunction:d,status:"queued",current:void 0})}function r(){return e}return{queue:e,add:n,getFunnels:r,changeFunnelStatus:t}}const we=so();function lo(){var b,g;const{isPremium:e,keyData:t,refreshPremium:n,getPremium:r}=je(),{flags:a}=en(),{shouldAskToSendShortcuts:l,shouldHideShortcuts:i,shouldHideCurrentFunnelPopover:c}=Ue(),[m,u]=s.exports.useState(),[d,h]=s.exports.useState(),[x,v]=s.exports.useState();async function I(){var A,S;const C=document.querySelector("#main");if(i){h(void 0),(A=C==null?void 0:C.parentElement)==null||A.classList.remove("zvWithShortcuts");return}const y=await nr();h(y),y&&Object.values(y).filter(E=>E.length>0).length>0&&((S=C==null?void 0:C.parentElement)==null||S.classList.add("zvWithShortcuts"))}s.exports.useEffect(()=>{const C=setInterval(()=>{var A;const y=xe();if(u(y),y&&!document.getElementById("currentFunnelWrapper")){const S=document.createElement("div");S.id="currentFunnelWrapper",S.style.cssText=`
          position: fixed;
          transform: translate(10px, 10px);
            `,(A=document.querySelector("[data-testid=conversation-panel-messages]"))==null||A.appendChild(S)}},1e3);return()=>clearInterval(C)},[]);const f=async C=>{function y(A){A&&window.dispatchEvent(new CustomEvent(A))}try{const{detail:A}=C,{type:S,item:E}=A;if(S==="toast"){_[E.type](E.message);return}const{chatTargetId:k,promiseId:F,avoidToast:T}=A;if(S==="funis"){v(E);return}const M=k?await He(k):X();if(!M&&!k){_.error("Nenhum chat aberto, clique na conversa desejada antes de enviar um item"),y(F);return}if(!M&&!!k){_.error(`Chat(${k}) n\xE3o encontrado`),y(F);return}if(S==="directFunnel"){if(!e)return;we.add(E,M.id.toString(),A.delayAtStart);return}if(S==="mensagens"){const N=Qn(String(E.data),M).then(W=>{y(F)}).catch(W=>{y(F),console.log(W)});T||_.promise(N,{pending:"Enviando mensagem...",success:"Mensagem enviada!",error:"Erro ao enviar a mensagem."});return}if(S==="audios"){const{premium:N}=A,W=r();if(!e&&!N&&await tn(E.data)>60){_.error(`${t} => O audio n\xE3o pode ser enviado porque excede o limite de 60 segundos, considere assinar a vers\xE3o PREMIUM `,{theme:"colored",autoClose:3e3}),y(F),n();return}if(E.sendAsForwarded){const D=et(E.data,M).then(V=>{y(F)}).catch(V=>{y(F),console.log(V)});T||_.promise(D,{pending:"Enviando \xE1udio...",success:"\xC1udio enviado!",error:"Erro ao enviar o \xE1udio."})}else{const D=$n(E.data,M).then(V=>{y(F)}).catch(V=>{y(F),console.log(V)});T||_.promise(D,{pending:"Enviando \xE1udio...",success:"\xC1udio enviado!",error:"Erro ao enviar o \xE1udio."})}return}if(S==="medias"){const N=et(E.data,M,E.caption).then(W=>{y(F)}).catch(W=>{y(F),console.log(W)});T||_.promise(N,{pending:"Enviando m\xEDdia...",success:"M\xEDdia enviada!",error:"Erro ao enviar a m\xEDdia."});return}if(S==="docs"){const N=qn(E.data,M,E.fileName).then(W=>{y(F)}).catch(W=>{y(F),console.log(W)});T||_.promise(N,{pending:"Enviando documento...",success:"Documento enviado!",error:"Erro ao enviar o documento."})}M.composeQuotedMsg=null}catch(A){console.log(A),_.error(A.toString())}};function p({triggers:C,chatTitle:y,chatTargetId:A}){if(C.length===0)return;C.length>1&&_.info(o.createElement("div",{className:"flex flex-col"},o.createElement("span",null,"Mais de um gatilho correspondente no chat ",y,", enviando o primeiro encontrado."),o.createElement("span",{className:"underline text-zap-blue"},"Lista: "),o.createElement("ol",null,C.map(F=>o.createElement("li",{key:F.triggerId}," - ",F.name)))));const[S]=C,{funnelId:E,secondsBeforeSend:k}=S;ro(E,A,k)}const w=C=>{var y;(C==null?void 0:C.type)==="ciphertext"&&(C==null||C.once("change:type",()=>{queueMicrotask(()=>{w(C)})})),(C==null?void 0:C.isNewMsg)&&!((y=C==null?void 0:C.id)!=null&&y.fromMe)&&(C==null?void 0:C.type)==="chat"&&queueMicrotask(async()=>{var k;const A=C==null?void 0:C.body;if(!A)return;const S=await rr({message:A});if(S.length===0)return;if(S.length>0&&!e){n();return}const E=$e(C==null?void 0:C.id.remote.toString());if((k=E==null?void 0:E.contact)!=null&&k.isMyContact){const F=S.filter(T=>!T.dontSendToContact);p({chatTargetId:E==null?void 0:E.id.toString(),chatTitle:E==null?void 0:E.formattedTitle,triggers:F})}else p({chatTargetId:E==null?void 0:E.id.toString(),chatTitle:E==null?void 0:E.formattedTitle,triggers:S})})};return s.exports.useEffect(()=>(a.automaticTriggers&&(P==null||P.Msg.on("add",w)),()=>{P==null||P.Msg.off("add",w)}),[e,t,a]),s.exports.useEffect(()=>{const C=setInterval(async()=>{var S,E;const y=document.querySelector('#main [contenteditable="true"]');document.querySelector("#main")&&!((S=document.getElementById("actionsContainerZV"))!=null&&S.innerHTML)&&!i&&await I(),!!((E=document.getElementById("actionsContainerZV"))!=null&&E.innerHTML)&&!i&&y&&!y.onkeyup&&!!document.getElementById("actionsContainerZV")&&document.getElementById("actionsContainerZV").children.length>0&&(y.onkeyup=k=>{var T;const F=(T=k.target)==null?void 0:T.textContent;Array.from(document.getElementById("actionsContainerZV").children).forEach(M=>{const N=M.innerText;F&&!qe(N).toLowerCase().includes(qe(F).toLowerCase())?M.style.display="none":M.style.display="block"})},y.onblur=k=>{!!y&&!y.textContent&&!!document.getElementById("actionsContainerZV")&&document.getElementById("actionsContainerZV").children.length!==Array.from(document.getElementById("actionsContainerZV").children).filter(F=>F.style.display==="block").length&&Array.from(document.getElementById("actionsContainerZV").children).forEach(F=>{F.style.display="block"})})},1e3);return()=>{clearInterval(C)}},[l,i,c]),s.exports.useEffect(()=>(window.addEventListener("ZVEvent",f),()=>{window.removeEventListener("ZVEvent",f)}),[e,t]),o.createElement(o.Fragment,null,x&&o.createElement(Wn,{funnel:x,setFunnelPopUp:v}),!c&&document.getElementById("main")&&m&&o.createElement(Be,{container:document.getElementById("main")},o.createElement(no,{chatId:m.targetId,setCurrentFunnel:u})),document.getElementById("configPopoverZV")&&o.createElement(Be,{container:document.getElementById("configPopoverZV")},o.createElement(Da,null)),!i&&((b=document.getElementById("main"))==null?void 0:b.parentElement)&&d&&Object.values(d).filter(C=>C.length>0).length>0&&o.createElement(Be,{container:(g=document.getElementById("main"))==null?void 0:g.parentElement},o.createElement("div",{id:"actionsWrapperZV",className:`
          flex items-center justify-between w-[98%] absolute bottom-0 z-[9999999990]
          `},o.createElement(Ga,{currentActionIndexes:d,setFunnelPopUp:v,reloadCurrentActionIndexes:I}))))}Et.setAppElement("#app");try{Ft()}catch(e){console.log(e)}const co=setInterval(()=>{var e;if(be&&ze){if(clearInterval(co),!document.getElementById("rootZV")){const t=document.createElement("div");t.id="rootZV",document.body.appendChild(t)}if(!document.getElementById("configPopoverZV")){const t=document.createElement("div");t.id="configPopoverZV",(e=document.querySelector(".two header"))==null||e.appendChild(t)}vn.createRoot(document.getElementById("rootZV")).render(o.createElement(o.StrictMode,null,o.createElement(ar,null,o.createElement(tr,null,o.createElement(Oa,null,o.createElement(nn,{theme:"dark",hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0,position:"top-center",autoClose:2e3}),o.createElement(lo,null),o.createElement(Cn,null)))),o.createElement(yn,null))),O?_.success(o.createElement("div",{style:{display:"flex",flexDirection:"column",fontSize:"1rem"}},o.createElement("span",null,"ZapVoice carregado!"),o.createElement("span",null,"Seu Whatsapp Web agora tem"),o.createElement("span",{style:{background:"linear-gradient(to bottom, #6CB2ED, #8D1AF1)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginTop:"0.5rem"}},"Habilidades e Superpoderes!!")),{autoClose:3e3}):_.error("ID da extens\xE3o n\xE3o localizado, recarregue a p\xE1gina")}},1e3);
